{"ast":null,"code":"import _objectSpread from\"C:/Users/amy gee/Desktop/Sweet Bite Bakery System/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";// src/context/CartContext.js\nimport React,{createContext,useContext,useState,useEffect}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";const CartContext=/*#__PURE__*/createContext();export function CartProvider(_ref){let{children}=_ref;const[items,setItems]=useState(()=>{try{const saved=localStorage.getItem(\"cart\");return saved?JSON.parse(saved):[];}catch(err){console.error(\"Error loading cart from localStorage:\",err);return[];}});// ðŸ§  Save cart to localStorage on every change\nuseEffect(()=>{localStorage.setItem(\"cart\",JSON.stringify(items));},[items]);// ðŸ›’ Add item to cart (with quantity)\nconst addToCart=function(product){let quantity=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;setItems(prev=>{const existing=prev.find(it=>it.product.id===product.id);if(existing){return prev.map(it=>it.product.id===product.id?_objectSpread(_objectSpread({},it),{},{quantity:it.quantity+quantity}):it);}return[...prev,{product,quantity}];});};// ðŸ§¾ Remove an item completely\nconst removeItem=productId=>{setItems(prev=>prev.filter(it=>it.product.id!==productId));};// ðŸ”¢ Update item quantity (remove if 0)\nconst updateQuantity=(productId,quantity)=>{if(quantity<=0)return removeItem(productId);setItems(prev=>prev.map(it=>it.product.id===productId?_objectSpread(_objectSpread({},it),{},{quantity}):it));};// ðŸ§¹ Clear cart entirely (used after checkout)\nconst clearCart=()=>{setItems([]);localStorage.removeItem(\"cart\");};// ðŸ’° Calculate subtotal\nconst subtotal=()=>items.reduce((sum,it)=>sum+Number(it.product.base_price)*it.quantity,0);// ðŸ”¢ Get total item count (for Navbar checkout badge)\nconst cartCount=()=>items.reduce((sum,it)=>sum+(it.quantity||0),0);return/*#__PURE__*/_jsx(CartContext.Provider,{value:{items,addToCart,removeItem,updateQuantity,clearCart,subtotal,cartCount},children:children});}// âœ… Hook to use cart anywhere\nexport function useCart(){const context=useContext(CartContext);if(!context){throw new Error(\"useCart must be used within a CartProvider\");}return context;}","map":{"version":3,"names":["React","createContext","useContext","useState","useEffect","jsx","_jsx","CartContext","CartProvider","_ref","children","items","setItems","saved","localStorage","getItem","JSON","parse","err","console","error","setItem","stringify","addToCart","product","quantity","arguments","length","undefined","prev","existing","find","it","id","map","_objectSpread","removeItem","productId","filter","updateQuantity","clearCart","subtotal","reduce","sum","Number","base_price","cartCount","Provider","value","useCart","context","Error"],"sources":["C:/Users/amy gee/Desktop/Sweet Bite Bakery System/frontend/src/context/CartContext.js"],"sourcesContent":["// src/context/CartContext.js\nimport React, { createContext, useContext, useState, useEffect } from \"react\";\n\nconst CartContext = createContext();\n\nexport function CartProvider({ children }) {\n  const [items, setItems] = useState(() => {\n    try {\n      const saved = localStorage.getItem(\"cart\");\n      return saved ? JSON.parse(saved) : [];\n    } catch (err) {\n      console.error(\"Error loading cart from localStorage:\", err);\n      return [];\n    }\n  });\n\n  // ðŸ§  Save cart to localStorage on every change\n  useEffect(() => {\n    localStorage.setItem(\"cart\", JSON.stringify(items));\n  }, [items]);\n\n  // ðŸ›’ Add item to cart (with quantity)\n  const addToCart = (product, quantity = 1) => {\n    setItems((prev) => {\n      const existing = prev.find((it) => it.product.id === product.id);\n      if (existing) {\n        return prev.map((it) =>\n          it.product.id === product.id\n            ? { ...it, quantity: it.quantity + quantity }\n            : it\n        );\n      }\n      return [...prev, { product, quantity }];\n    });\n  };\n\n  // ðŸ§¾ Remove an item completely\n  const removeItem = (productId) => {\n    setItems((prev) => prev.filter((it) => it.product.id !== productId));\n  };\n\n  // ðŸ”¢ Update item quantity (remove if 0)\n  const updateQuantity = (productId, quantity) => {\n    if (quantity <= 0) return removeItem(productId);\n    setItems((prev) =>\n      prev.map((it) =>\n        it.product.id === productId ? { ...it, quantity } : it\n      )\n    );\n  };\n\n  // ðŸ§¹ Clear cart entirely (used after checkout)\n  const clearCart = () => {\n    setItems([]);\n    localStorage.removeItem(\"cart\");\n  };\n\n  // ðŸ’° Calculate subtotal\n  const subtotal = () =>\n    items.reduce(\n      (sum, it) => sum + Number(it.product.base_price) * it.quantity,\n      0\n    );\n\n  // ðŸ”¢ Get total item count (for Navbar checkout badge)\n  const cartCount = () =>\n    items.reduce((sum, it) => sum + (it.quantity || 0), 0);\n\n  return (\n    <CartContext.Provider\n      value={{\n        items,\n        addToCart,\n        removeItem,\n        updateQuantity,\n        clearCart,\n        subtotal,\n        cartCount,\n      }}\n    >\n      {children}\n    </CartContext.Provider>\n  );\n}\n\n// âœ… Hook to use cart anywhere\nexport function useCart() {\n  const context = useContext(CartContext);\n  if (!context) {\n    throw new Error(\"useCart must be used within a CartProvider\");\n  }\n  return context;\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}