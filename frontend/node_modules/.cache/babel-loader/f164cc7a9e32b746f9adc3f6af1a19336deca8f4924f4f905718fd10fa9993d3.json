{"ast":null,"code":"import _objectSpread from\"C:/Users/amy gee/Desktop/Sweet Bite Bakery System/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";// src/pages/Products.js\nimport React,{useEffect,useState}from\"react\";import api from\"../api/api\";import{useCart}from\"../context/CartContext\";import{getImageUrl}from\"../utils/imageUrl\";import toast from\"react-hot-toast\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Products(){const[products,setProducts]=useState([]);const[loading,setLoading]=useState(true);const{addToCart}=useCart();const[quantities,setQuantities]=useState({});// ‚úÖ Fetch products from backend\nuseEffect(()=>{api.get(\"/products\").then(res=>{setProducts(res.data.data||res.data);setLoading(false);}).catch(err=>{console.error(\"‚ùå Error fetching products:\",err);setLoading(false);});},[]);// ‚úÖ Adjust quantity per product\nconst handleQuantityChange=(id,delta)=>{setQuantities(prev=>_objectSpread(_objectSpread({},prev),{},{[id]:Math.max(1,(prev[id]||1)+delta)}));};// ‚úÖ Add to cart and reset quantity\nconst handleAddToCart=product=>{const qty=quantities[product.id]||1;addToCart(product,qty);setQuantities(prev=>_objectSpread(_objectSpread({},prev),{},{[product.id]:1}));toast.success(\"\".concat(product.name,\" added to cart! \\uD83D\\uDED2\"));};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-2 md:grid-cols-4 gap-6 p-8 min-h-screen\",style:{backgroundColor:\"#fff8f0\"},children:[...Array(8)].map((_,i)=>/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl p-4 shadow animate-pulse flex flex-col items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-full h-40 rounded-xl mb-4\",style:{backgroundColor:\"#f0e6dd\"}}),/*#__PURE__*/_jsx(\"div\",{className:\"w-3/4 h-4 rounded mb-2\",style:{backgroundColor:\"#e8ddd2\"}}),/*#__PURE__*/_jsx(\"div\",{className:\"w-1/2 h-4 rounded\",style:{backgroundColor:\"#e8ddd2\"}})]},i))});}return/*#__PURE__*/_jsxs(\"div\",{className:\"p-8 min-h-screen\",style:{backgroundColor:\"#fff8f0\"},children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-center mb-8\",style:{color:\"#974D07\"},children:\"\\uD83C\\uDF70 Our Sweet Selections\"}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6\",children:products.length>0?products.map(product=>{const unavailable=!product.is_available||product.is_available===0;return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl shadow-md p-4 flex flex-col items-center transition-transform relative \".concat(unavailable?\"opacity-60 grayscale pointer-events-none\":\"hover:scale-105\"),children:[/*#__PURE__*/_jsx(\"img\",{src:getImageUrl(product.image_url),alt:product.name,className:\"w-full h-40 object-cover rounded-xl mb-4\"}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-semibold text-gray-800\",children:product.name}),/*#__PURE__*/_jsxs(\"p\",{className:\"font-bold mt-2\",style:{color:\"#974D07\"},children:[\"\\u20B1\",Number(product.base_price).toFixed(2)]}),unavailable&&/*#__PURE__*/_jsx(\"span\",{className:\"absolute top-4 right-4 bg-red-500 text-white text-xs px-3 py-1 rounded-full shadow\",children:\"Out of Stock\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 mt-3\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"bg-gray-200 px-3 py-1 rounded-full\",onClick:()=>handleQuantityChange(product.id,-1),disabled:unavailable,children:\"-\"}),/*#__PURE__*/_jsx(\"span\",{children:quantities[product.id]||1}),/*#__PURE__*/_jsx(\"button\",{className:\"bg-gray-200 px-3 py-1 rounded-full\",onClick:()=>handleQuantityChange(product.id,+1),disabled:unavailable,children:\"+\"})]}),/*#__PURE__*/_jsx(\"button\",{className:\"mt-4 text-white px-4 py-2 rounded-lg disabled:bg-gray-400 disabled:cursor-not-allowed transition\",style:{backgroundColor:\"#974D07\"},onMouseEnter:e=>!e.target.disabled&&(e.target.style.opacity=\"0.9\"),onMouseLeave:e=>!e.target.disabled&&(e.target.style.opacity=\"1\"),onClick:()=>handleAddToCart(product),disabled:unavailable,children:unavailable?\"Unavailable\":\"Add to Cart\"})]},product.id);}):/*#__PURE__*/_jsx(\"p\",{className:\"text-center text-gray-600 col-span-full\",children:\"No products found.\"})})]});}","map":{"version":3,"names":["React","useEffect","useState","api","useCart","getImageUrl","toast","jsx","_jsx","jsxs","_jsxs","Products","products","setProducts","loading","setLoading","addToCart","quantities","setQuantities","get","then","res","data","catch","err","console","error","handleQuantityChange","id","delta","prev","_objectSpread","Math","max","handleAddToCart","product","qty","success","concat","name","className","style","backgroundColor","children","Array","map","_","i","color","length","unavailable","is_available","src","image_url","alt","Number","base_price","toFixed","onClick","disabled","onMouseEnter","e","target","opacity","onMouseLeave"],"sources":["C:/Users/amy gee/Desktop/Sweet Bite Bakery System/frontend/src/pages/Products.js"],"sourcesContent":["// src/pages/Products.js\nimport React, { useEffect, useState } from \"react\";\nimport api from \"../api/api\";\nimport { useCart } from \"../context/CartContext\";\nimport { getImageUrl } from \"../utils/imageUrl\";\nimport toast from \"react-hot-toast\";\n\nexport default function Products() {\n  const [products, setProducts] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const { addToCart } = useCart();\n  const [quantities, setQuantities] = useState({});\n\n  // ‚úÖ Fetch products from backend\n  useEffect(() => {\n    api\n      .get(\"/products\")\n      .then((res) => {\n        setProducts(res.data.data || res.data);\n        setLoading(false);\n      })\n      .catch((err) => {\n        console.error(\"‚ùå Error fetching products:\", err);\n        setLoading(false);\n      });\n  }, []);\n\n  // ‚úÖ Adjust quantity per product\n  const handleQuantityChange = (id, delta) => {\n    setQuantities((prev) => ({\n      ...prev,\n      [id]: Math.max(1, (prev[id] || 1) + delta),\n    }));\n  };\n\n  // ‚úÖ Add to cart and reset quantity\n  const handleAddToCart = (product) => {\n    const qty = quantities[product.id] || 1;\n    addToCart(product, qty);\n    setQuantities((prev) => ({ ...prev, [product.id]: 1 }));\n    toast.success(`${product.name} added to cart! üõí`);\n  };\n\n  if (loading) {\n    return (\n      <div className=\"grid grid-cols-2 md:grid-cols-4 gap-6 p-8 min-h-screen\" style={{ backgroundColor: \"#fff8f0\" }}>\n  {[...Array(8)].map((_, i) => (\n    <div\n      key={i}\n      className=\"bg-white rounded-2xl p-4 shadow animate-pulse flex flex-col items-center\"\n    >\n      <div className=\"w-full h-40 rounded-xl mb-4\" style={{ backgroundColor: \"#f0e6dd\" }}></div>\n      <div className=\"w-3/4 h-4 rounded mb-2\" style={{ backgroundColor: \"#e8ddd2\" }}></div>\n      <div className=\"w-1/2 h-4 rounded\" style={{ backgroundColor: \"#e8ddd2\" }}></div>\n    </div>\n  ))}\n</div>\n\n    );\n  }\n\n\n  return (\n    <div className=\"p-8 min-h-screen\" style={{ backgroundColor: \"#fff8f0\" }}>\n      <h1 className=\"text-3xl font-bold text-center mb-8\" style={{ color: \"#974D07\" }}>\n        üç∞ Our Sweet Selections\n      </h1>\n\n      <div className=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6\">\n        {products.length > 0 ? (\n          products.map((product) => {\n            const unavailable = !product.is_available || product.is_available === 0;\n            return (\n              <div\n                key={product.id}\n                className={`bg-white rounded-2xl shadow-md p-4 flex flex-col items-center transition-transform relative ${\n                  unavailable ? \"opacity-60 grayscale pointer-events-none\" : \"hover:scale-105\"\n                }`}\n              >\n                <img\n                  src={getImageUrl(product.image_url)}\n                  alt={product.name}\n                  className=\"w-full h-40 object-cover rounded-xl mb-4\"\n                />\n                <h2 className=\"text-lg font-semibold text-gray-800\">\n                  {product.name}\n                </h2>\n                <p className=\"font-bold mt-2\" style={{ color: \"#974D07\" }}>\n                  ‚Ç±{Number(product.base_price).toFixed(2)}\n                </p>\n\n                {unavailable && (\n                  <span className=\"absolute top-4 right-4 bg-red-500 text-white text-xs px-3 py-1 rounded-full shadow\">\n                    Out of Stock\n                  </span>\n                )}\n\n                <div className=\"flex items-center gap-2 mt-3\">\n                  <button\n                    className=\"bg-gray-200 px-3 py-1 rounded-full\"\n                    onClick={() => handleQuantityChange(product.id, -1)}\n                    disabled={unavailable}\n                  >\n                    -\n                  </button>\n                  <span>{quantities[product.id] || 1}</span>\n                  <button\n                    className=\"bg-gray-200 px-3 py-1 rounded-full\"\n                    onClick={() => handleQuantityChange(product.id, +1)}\n                    disabled={unavailable}\n                  >\n                    +\n                  </button>\n                </div>\n\n                <button\n                  className=\"mt-4 text-white px-4 py-2 rounded-lg disabled:bg-gray-400 disabled:cursor-not-allowed transition\"\n                  style={{ backgroundColor: \"#974D07\" }}\n                  onMouseEnter={(e) => !e.target.disabled && (e.target.style.opacity = \"0.9\")}\n                  onMouseLeave={(e) => !e.target.disabled && (e.target.style.opacity = \"1\")}\n                  onClick={() => handleAddToCart(product)}\n                  disabled={unavailable}\n                >\n                  {unavailable ? \"Unavailable\" : \"Add to Cart\"}\n                </button>\n              </div>\n            );\n          })\n        ) : (\n          <p className=\"text-center text-gray-600 col-span-full\">\n            No products found.\n          </p>\n        )}\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}