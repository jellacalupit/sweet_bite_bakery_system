{"ast":null,"code":"import _objectSpread from\"C:/Users/amy gee/Desktop/Sweet Bite Bakery System/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";// src/pages/admin/AdminDashboard.jsx\nimport React,{useEffect,useMemo,useState,useCallback}from\"react\";import api from\"../../api/api\";import{useAuth}from\"../../context/AuthContext\";import{useNavigate}from\"react-router-dom\";import AdminSidebar from\"./components/AdminSidebar\";import AdminTopbar from\"./components/AdminTopbar\";import{useSidebar}from\"../../context/SidebarContext\";import{FiEdit,FiTrash2,FiX}from\"react-icons/fi\";import toast from\"react-hot-toast\";import{getImageUrl}from\"../../utils/imageUrl\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function AdminDashboard(){const{user}=useAuth();const navigate=useNavigate();const{collapsed,toggle}=useSidebar();useEffect(()=>{if(!user)return;if(user.role!==\"admin\"){navigate(\"/\",{replace:true});}},[user,navigate]);const[products,setProducts]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[search,setSearch]=useState(\"\");const[selectedCategory,setSelectedCategory]=useState(\"all\");// all | cake | bread | pastry | cupcake | cookies\nconst[priceSort,setPriceSort]=useState(\"asc\");// asc: lowest->highest, desc: highest->lowest\nconst[perPage]=useState(50);const[page]=useState(1);// Edit Modal State\nconst[editModalOpen,setEditModalOpen]=useState(false);const[editingProduct,setEditingProduct]=useState(null);const[editForm,setEditForm]=useState({name:\"\",category_id:\"\",base_price:\"\",is_available:true,description:\"\",image:null});const[editPreview,setEditPreview]=useState(null);const[editLoading,setEditLoading]=useState(false);const[categories,setCategories]=useState([]);// Delete Modal State\nconst[deleteModalOpen,setDeleteModalOpen]=useState(false);const[deletingProduct,setDeletingProduct]=useState(null);const[deleteLoading,setDeleteLoading]=useState(false);const formatMoney=value=>{const n=Number(value);return Number.isFinite(n)?n.toFixed(2):\"\";};const fetchProducts=useCallback(async function(){let opts=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};setError(null);try{var _res$data;const params={page:opts.page||page,per_page:opts.per_page||perPage};const res=await api.get(\"/products\",{params});// Handle paginated response structure\n// Laravel pagination returns: { data: [...], current_page: 1, ... }\n// Non-paginated returns: [...]\nconst data=(_res$data=res.data)!==null&&_res$data!==void 0&&_res$data.data?res.data.data:Array.isArray(res.data)?res.data:[];console.log(\"Fetched products:\",data.length,\"items\");setProducts(Array.isArray(data)?data:[]);setLoading(false);}catch(err){console.error(\"Error fetching products:\",err);setError(\"Failed to load products\");setLoading(false);}},[page,perPage]);// Fetch categories\nuseEffect(()=>{const fetchCategories=async()=>{try{const response=await api.get(\"/categories\");if(response.data&&response.data.length>0){setCategories(response.data);}}catch(err){console.error(\"Failed to fetch categories:\",err);}};fetchCategories();},[]);useEffect(()=>{setLoading(true);fetchProducts({page:1});const interval=setInterval(()=>{fetchProducts({page:1});},5000);return()=>clearInterval(interval);},[fetchProducts]);const displayedProducts=useMemo(()=>{const q=(search||\"\").trim().toLowerCase();const cat=selectedCategory===\"all\"?null:String(selectedCategory).toLowerCase();const filtered=(Array.isArray(products)?products:[]).filter(p=>{var _p$category2;if(cat){var _p$category;const categoryName=String(((_p$category=p.category)===null||_p$category===void 0?void 0:_p$category.name)||\"\").trim().toLowerCase();if(categoryName!==cat)return false;}if(!q)return true;const name=String(p.name||\"\").toLowerCase();const categoryName=String(((_p$category2=p.category)===null||_p$category2===void 0?void 0:_p$category2.name)||\"\").toLowerCase();return name.includes(q)||categoryName.includes(q);});const sorted=[...filtered].sort((a,b)=>{const ap=Number(a.base_price)||0;const bp=Number(b.base_price)||0;return priceSort===\"desc\"?bp-ap:ap-bp;});return sorted;},[products,search,selectedCategory,priceSort]);const stats=useMemo(()=>{const total=displayedProducts.length;const available=displayedProducts.filter(p=>{const v=p.is_available;return v===true||v===1||v===\"1\";}).length;const unavailable=total-available;const recent=[...displayedProducts].sort((a,b)=>new Date(b.created_at||0)-new Date(a.created_at||0)).slice(0,6);return{total,available,unavailable,recent};},[displayedProducts]);// Open Edit Modal\nconst handleEditClick=product=>{var _product$category;setEditingProduct(product);setEditForm({name:product.name||\"\",category_id:product.category_id||((_product$category=product.category)===null||_product$category===void 0?void 0:_product$category.id)||\"\",base_price:formatMoney(product.base_price),// Convert to string for select compatibility\nis_available:product.is_available===1||product.is_available===true?\"1\":\"0\",description:product.description||\"\",image:null});setEditPreview(product.image_url?getImageUrl(product.image_url):null);setEditModalOpen(true);};// Close Edit Modal\nconst handleCloseEditModal=()=>{setEditModalOpen(false);setEditingProduct(null);setEditPreview(null);setEditForm({name:\"\",category_id:\"\",base_price:\"\",is_available:true,description:\"\",image:null});};// Handle Edit Form Change\nconst handleEditChange=e=>{const{name,value,files}=e.target;if(files&&files.length>0){const file=files[0];// Validate file type\nif(!file.type.startsWith('image/')){toast.error(\"Please select a valid image file\");return;}// Validate file size (max 5MB)\nif(file.size>5*1024*1024){toast.error(\"Image size must be less than 5MB\");return;}setEditForm(_objectSpread(_objectSpread({},editForm),{},{image:file}));setEditPreview(URL.createObjectURL(file));}else if(name===\"is_available\"){// Always store as string \"1\" or \"0\"\nsetEditForm(_objectSpread(_objectSpread({},editForm),{},{is_available:value}));}else{setEditForm(_objectSpread(_objectSpread({},editForm),{},{[name]:value}));}};// Submit Edit\nconst handleEditSubmit=async e=>{e.preventDefault();setEditLoading(true);try{// Validate required fields\nif(!editForm.name||!editForm.category_id||!editForm.base_price){toast.error(\"Please fill in all required fields\");setEditLoading(false);return;}const categoryId=parseInt(editForm.category_id);if(isNaN(categoryId)||categoryId<=0){toast.error(\"Please select a valid category\");setEditLoading(false);return;}const basePrice=parseFloat(editForm.base_price);if(isNaN(basePrice)||basePrice<0){toast.error(\"Please enter a valid price\");setEditLoading(false);return;}const fd=new FormData();fd.append(\"_method\",\"PUT\");fd.append(\"name\",editForm.name.trim());fd.append(\"category_id\",categoryId.toString());fd.append(\"base_price\",basePrice.toFixed(2));// Always send as string \"1\" or \"0\"\nfd.append(\"is_available\",editForm.is_available);fd.append(\"description\",(editForm.description||\"\").trim());if(editForm.image&&editForm.image instanceof File){fd.append(\"image\",editForm.image);}console.log(\"Edit FormData entries:\");for(const[k,v]of fd.entries()){console.log(\"\".concat(k,\":\"),v instanceof File?\"File(\".concat(v.name,\", \").concat(v.size,\" bytes)\"):v);}const response=await api.post(\"/products/\".concat(editingProduct.id),fd);console.log(\"Update response:\",response.data);toast.success(\"Product updated successfully!\");handleCloseEditModal();// Refresh products to see the updated image\nawait fetchProducts({page:1});}catch(err){var _err$response,_err$response2,_err$response2$data;console.error(\"Product update error:\",err);console.error(\"Error response:\",(_err$response=err.response)===null||_err$response===void 0?void 0:_err$response.data);if((_err$response2=err.response)!==null&&_err$response2!==void 0&&(_err$response2$data=_err$response2.data)!==null&&_err$response2$data!==void 0&&_err$response2$data.errors){const errors=err.response.data.errors;const errorMessages=Object.values(errors).flat();errorMessages.forEach(msg=>toast.error(msg));}else{var _err$response3,_err$response3$data;toast.error(((_err$response3=err.response)===null||_err$response3===void 0?void 0:(_err$response3$data=_err$response3.data)===null||_err$response3$data===void 0?void 0:_err$response3$data.message)||\"Failed to update product\");}}finally{setEditLoading(false);}};// Open Delete Modal\nconst handleDeleteClick=product=>{setDeletingProduct(product);setDeleteModalOpen(true);};// Close Delete Modal\nconst handleCloseDeleteModal=()=>{setDeleteModalOpen(false);setDeletingProduct(null);};// Confirm Delete\nconst handleConfirmDelete=async()=>{setDeleteLoading(true);try{await api.delete(\"/products/\".concat(deletingProduct.id));toast.success(\"Product deleted successfully!\");handleCloseDeleteModal();fetchProducts({page:1});// Refresh products\n}catch(err){var _err$response4,_err$response4$data;console.error(\"Product delete error:\",err);toast.error(((_err$response4=err.response)===null||_err$response4===void 0?void 0:(_err$response4$data=_err$response4.data)===null||_err$response4$data===void 0?void 0:_err$response4$data.message)||\"Failed to delete product\");}finally{setDeleteLoading(false);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"flex h-screen bg-[#E6E6E6] overflow-hidden\",children:[/*#__PURE__*/_jsx(AdminSidebar,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 flex flex-col min-w-0 transition-all duration-300 \".concat(collapsed?\"ml-0\":\"lg:ml-64 ml-0\"),children:[/*#__PURE__*/_jsx(AdminTopbar,{toggleSidebar:toggle,isSidebarOpen:!collapsed}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 p-6 overflow-y-auto\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"flex flex-wrap items-center justify-between gap-4 mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-4xl font-bold text-[#5A381E]\",children:\"Dashboard\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500\",children:\"Overview of products and recent activity\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap items-center gap-3\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search products...\",value:search,onChange:e=>setSearch(e.target.value),className:\"w-56 px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-[#B3611B]\"}),/*#__PURE__*/_jsxs(\"select\",{value:selectedCategory,onChange:e=>setSelectedCategory(e.target.value),className:\"px-3 py-2 border border-gray-300 rounded-lg text-sm bg-white focus:outline-none focus:ring-2 focus:ring-[#B3611B]\",\"aria-label\":\"Sort categories\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"all\",children:\"All categories\"}),/*#__PURE__*/_jsx(\"option\",{value:\"cake\",children:\"Cake\"}),/*#__PURE__*/_jsx(\"option\",{value:\"bread\",children:\"Bread\"}),/*#__PURE__*/_jsx(\"option\",{value:\"pastry\",children:\"Pastry\"}),/*#__PURE__*/_jsx(\"option\",{value:\"cupcake\",children:\"Cupcake\"}),/*#__PURE__*/_jsx(\"option\",{value:\"cookies\",children:\"Cookies\"})]}),/*#__PURE__*/_jsxs(\"select\",{value:priceSort,onChange:e=>setPriceSort(e.target.value),className:\"px-3 py-2 border border-gray-300 rounded-lg text-sm bg-white focus:outline-none focus:ring-2 focus:ring-[#B3611B]\",\"aria-label\":\"Sort by price\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"asc\",children:\"Price: lowest - highest\"}),/*#__PURE__*/_jsx(\"option\",{value:\"desc\",children:\"Price: highest - lowest\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-5 rounded-xl shadow\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-600\",children:\"Total Products\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-3xl font-bold text-[#5A381E]\",children:stats.total})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-5 rounded-xl shadow\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-600\",children:\"Available\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-3xl font-bold text-green-600\",children:stats.available})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-5 rounded-xl shadow\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-600\",children:\"Out of Stock\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-3xl font-bold text-red-600\",children:stats.unavailable})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl p-5 shadow border border-gray-200 mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-[#5A381E]\",children:\"Recent Products\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-gray-500\",children:\"Latest\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\",children:[stats.recent.length===0&&/*#__PURE__*/_jsx(\"div\",{className:\"col-span-full text-sm text-gray-500 text-center py-4\",children:\"No recent products\"}),stats.recent.slice(0,4).map(p=>{var _p$category3;return/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center p-3 border border-gray-200 rounded-lg hover:shadow-md transition\",children:[/*#__PURE__*/_jsx(\"img\",{src:getImageUrl(p.image_url),alt:p.name,className:\"w-16 h-16 rounded object-cover border mb-2\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center w-full\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-medium text-sm text-gray-800 truncate\",children:p.name}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-400 mb-1\",children:((_p$category3=p.category)===null||_p$category3===void 0?void 0:_p$category3.name)||\"—\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm font-semibold text-[#B3611B]\",children:[\"\\u20B1\",Number(p.base_price).toFixed(2)]})]})]},p.id);})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-xl shadow overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-[#F7F3EF] text-sm text-gray-600\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-left\",children:\"#\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-left\",children:\"Image\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-left\",children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-left\",children:\"Category\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-right\",children:\"Price\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-center\",children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-center\",children:\"Actions\"})]})}),/*#__PURE__*/_jsxs(\"tbody\",{className:\"divide-y\",children:[loading&&/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"7\",className:\"p-6 text-center\",children:\"Loading products...\"})}),!loading&&products.length===0&&/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"7\",className:\"p-6 text-center\",children:\"No products found.\"})}),!loading&&products.length>0&&displayedProducts.length===0&&/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"7\",className:\"p-6 text-center\",children:\"No products found.\"})}),!loading&&displayedProducts.map((p,idx)=>{var _p$category4;return/*#__PURE__*/_jsxs(\"tr\",{className:\"hover:bg-[#FFF9F5]\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-3\",children:idx+1}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-3\",children:/*#__PURE__*/_jsx(\"img\",{src:getImageUrl(p.image_url),alt:p.name,className:\"w-12 h-12 rounded object-cover border\"})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-3\",children:p.name}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-3\",children:((_p$category4=p.category)===null||_p$category4===void 0?void 0:_p$category4.name)||\"-\"}),/*#__PURE__*/_jsxs(\"td\",{className:\"px-4 py-3 text-right\",children:[\"\\u20B1\",Number(p.base_price).toFixed(2)]}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-3 text-center\",children:p.is_available===true||p.is_available===1||p.is_available===\"1\"?/*#__PURE__*/_jsx(\"span\",{className:\"px-3 py-1 text-xs bg-green-100 text-green-700 rounded-full\",children:\"Available\"}):/*#__PURE__*/_jsx(\"span\",{className:\"px-3 py-1 text-xs bg-red-100 text-red-700 rounded-full\",children:\"Out of Stock\"})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-3 text-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-center gap-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleEditClick(p),className:\"p-2 text-[#B3611B] hover:bg-[#B3611B] hover:text-white rounded-lg transition\",title:\"Edit product\",children:/*#__PURE__*/_jsx(FiEdit,{})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDeleteClick(p),className:\"p-2 text-red-600 hover:bg-red-600 hover:text-white rounded-lg transition\",title:\"Delete product\",children:/*#__PURE__*/_jsx(FiTrash2,{})})]})})]},p.id);})]})]})}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-4 text-red-500\",children:error})]})]}),editModalOpen&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto m-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"sticky top-0 bg-white border-b px-6 py-4 flex items-center justify-between\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-[#5A381E]\",children:\"Edit Product\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleCloseEditModal,className:\"p-2 hover:bg-gray-100 rounded-lg transition\",children:/*#__PURE__*/_jsx(FiX,{className:\"text-xl\"})})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleEditSubmit,className:\"p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Name *\"}),/*#__PURE__*/_jsx(\"input\",{name:\"name\",value:editForm.name,onChange:handleEditChange,required:true,className:\"w-full border border-gray-300 px-3 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#B3611B]\",placeholder:\"Enter product name\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Category *\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"category_id\",value:editForm.category_id||\"\",onChange:handleEditChange,required:true,className:\"w-full border border-gray-300 px-3 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#B3611B]\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select category\"}),categories.map(cat=>/*#__PURE__*/_jsx(\"option\",{value:cat.id,children:cat.name},cat.id))]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-span-2\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Image\"}),!editPreview?/*#__PURE__*/_jsxs(\"div\",{className:\"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mb-2\",children:\"No image selected\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",name:\"image\",accept:\"image/*\",onChange:handleEditChange,className:\"hidden\",id:\"edit-image-upload\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"edit-image-upload\",className:\"cursor-pointer text-[#B3611B] hover:underline\",children:\"Browse files\"})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"img\",{src:editPreview,className:\"w-full h-48 object-cover rounded-lg border border-gray-300\",alt:\"Preview\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>{setEditForm(_objectSpread(_objectSpread({},editForm),{},{image:null}));setEditPreview(editingProduct!==null&&editingProduct!==void 0&&editingProduct.image_url?getImageUrl(editingProduct.image_url):null);},className:\"absolute top-2 right-2 bg-red-500 text-white p-2 rounded-full hover:bg-red-600\",children:/*#__PURE__*/_jsx(FiTrash2,{})})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Price *\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"absolute left-3 top-2 text-gray-500\",children:\"\\u20B1\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",min:\"0\",name:\"base_price\",value:editForm.base_price,onChange:handleEditChange,onBlur:()=>setEditForm(prev=>_objectSpread(_objectSpread({},prev),{},{base_price:formatMoney(prev.base_price)})),required:true,className:\"w-full border border-gray-300 px-3 py-2 pl-8 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#B3611B]\",placeholder:\"0.00\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Availability\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"is_available\",value:editForm.is_available,onChange:handleEditChange,className:\"w-full border border-gray-300 px-3 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#B3611B]\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"1\",children:\"Available\"}),/*#__PURE__*/_jsx(\"option\",{value:\"0\",children:\"Out of Stock\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-span-2\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Description\"}),/*#__PURE__*/_jsx(\"textarea\",{name:\"description\",value:editForm.description,onChange:handleEditChange,className:\"w-full border border-gray-300 px-3 py-2 rounded-lg h-32 focus:outline-none focus:ring-2 focus:ring-[#B3611B]\",placeholder:\"Enter product description\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end gap-3 mt-6\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:handleCloseEditModal,className:\"px-6 py-2 border-2 border-gray-300 text-gray-700 rounded-lg font-semibold hover:bg-gray-100 transition\",children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:editLoading,className:\"px-6 py-2 bg-[#B3611B] text-white rounded-lg font-semibold hover:bg-[#9a5015] transition disabled:opacity-50 disabled:cursor-not-allowed\",children:editLoading?\"Updating...\":\"Update Product\"})]})]})]})}),deleteModalOpen&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-xl shadow-2xl w-full max-w-md m-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-4\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-red-600\",children:\"Delete Product\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleCloseDeleteModal,className:\"p-2 hover:bg-gray-100 rounded-lg transition\",children:/*#__PURE__*/_jsx(FiX,{className:\"text-xl\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-700 mb-2\",children:\"Are you sure you want to delete this product?\"}),deletingProduct&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 p-4 rounded-lg\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-semibold text-gray-800\",children:deletingProduct.name}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500 mt-1\",children:\"This action cannot be undone.\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end gap-3\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:handleCloseDeleteModal,disabled:deleteLoading,className:\"px-6 py-2 border-2 border-gray-300 text-gray-700 rounded-lg font-semibold hover:bg-gray-100 transition disabled:opacity-50\",children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:handleConfirmDelete,disabled:deleteLoading,className:\"px-6 py-2 bg-red-600 text-white rounded-lg font-semibold hover:bg-red-700 transition disabled:opacity-50 disabled:cursor-not-allowed\",children:deleteLoading?\"Deleting...\":\"Confirm Delete\"})]})]})})})]});}","map":{"version":3,"names":["React","useEffect","useMemo","useState","useCallback","api","useAuth","useNavigate","AdminSidebar","AdminTopbar","useSidebar","FiEdit","FiTrash2","FiX","toast","getImageUrl","jsx","_jsx","jsxs","_jsxs","AdminDashboard","user","navigate","collapsed","toggle","role","replace","products","setProducts","loading","setLoading","error","setError","search","setSearch","selectedCategory","setSelectedCategory","priceSort","setPriceSort","perPage","page","editModalOpen","setEditModalOpen","editingProduct","setEditingProduct","editForm","setEditForm","name","category_id","base_price","is_available","description","image","editPreview","setEditPreview","editLoading","setEditLoading","categories","setCategories","deleteModalOpen","setDeleteModalOpen","deletingProduct","setDeletingProduct","deleteLoading","setDeleteLoading","formatMoney","value","n","Number","isFinite","toFixed","fetchProducts","opts","arguments","length","undefined","_res$data","params","per_page","res","get","data","Array","isArray","console","log","err","fetchCategories","response","interval","setInterval","clearInterval","displayedProducts","q","trim","toLowerCase","cat","String","filtered","filter","p","_p$category2","_p$category","categoryName","category","includes","sorted","sort","a","b","ap","bp","stats","total","available","v","unavailable","recent","Date","created_at","slice","handleEditClick","product","_product$category","id","image_url","handleCloseEditModal","handleEditChange","e","files","target","file","type","startsWith","size","_objectSpread","URL","createObjectURL","handleEditSubmit","preventDefault","categoryId","parseInt","isNaN","basePrice","parseFloat","fd","FormData","append","toString","File","k","entries","concat","post","success","_err$response","_err$response2","_err$response2$data","errors","errorMessages","Object","values","flat","forEach","msg","_err$response3","_err$response3$data","message","handleDeleteClick","handleCloseDeleteModal","handleConfirmDelete","delete","_err$response4","_err$response4$data","className","children","toggleSidebar","isSidebarOpen","placeholder","onChange","map","_p$category3","src","alt","colSpan","idx","_p$category4","onClick","title","onSubmit","required","accept","htmlFor","step","min","onBlur","prev","disabled"],"sources":["C:/Users/amy gee/Desktop/Sweet Bite Bakery System/frontend/src/pages/admin/AdminDashboard.js"],"sourcesContent":["// src/pages/admin/AdminDashboard.jsx\nimport React, { useEffect, useMemo, useState, useCallback } from \"react\";\nimport api from \"../../api/api\";\nimport { useAuth } from \"../../context/AuthContext\";\nimport { useNavigate } from \"react-router-dom\";\nimport AdminSidebar from \"./components/AdminSidebar\";\nimport AdminTopbar from \"./components/AdminTopbar\";\nimport { useSidebar } from \"../../context/SidebarContext\";\nimport { FiEdit, FiTrash2, FiX } from \"react-icons/fi\";\nimport toast from \"react-hot-toast\";\nimport { getImageUrl } from \"../../utils/imageUrl\";\n\nexport default function AdminDashboard() {\n  const { user } = useAuth();\n  const navigate = useNavigate();\n  const { collapsed, toggle } = useSidebar();\n\n  useEffect(() => {\n    if (!user) return;\n    if (user.role !== \"admin\") {\n      navigate(\"/\", { replace: true });\n    }\n  }, [user, navigate]);\n\n  const [products, setProducts] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [search, setSearch] = useState(\"\");\n  const [selectedCategory, setSelectedCategory] = useState(\"all\"); // all | cake | bread | pastry | cupcake | cookies\n  const [priceSort, setPriceSort] = useState(\"asc\"); // asc: lowest->highest, desc: highest->lowest\n  const [perPage] = useState(50);\n  const [page] = useState(1);\n  \n  // Edit Modal State\n  const [editModalOpen, setEditModalOpen] = useState(false);\n  const [editingProduct, setEditingProduct] = useState(null);\n  const [editForm, setEditForm] = useState({\n    name: \"\",\n    category_id: \"\",\n    base_price: \"\",\n    is_available: true,\n    description: \"\",\n    image: null,\n  });\n  const [editPreview, setEditPreview] = useState(null);\n  const [editLoading, setEditLoading] = useState(false);\n  const [categories, setCategories] = useState([]);\n  \n  // Delete Modal State\n  const [deleteModalOpen, setDeleteModalOpen] = useState(false);\n  const [deletingProduct, setDeletingProduct] = useState(null);\n  const [deleteLoading, setDeleteLoading] = useState(false);\n\n  const formatMoney = (value) => {\n    const n = Number(value);\n    return Number.isFinite(n) ? n.toFixed(2) : \"\";\n  };\n\n  const fetchProducts = useCallback(async (opts = {}) => {\n    setError(null);\n    try {\n      const params = {\n        page: opts.page || page,\n        per_page: opts.per_page || perPage,\n      };\n\n      const res = await api.get(\"/products\", { params });\n      \n      // Handle paginated response structure\n      // Laravel pagination returns: { data: [...], current_page: 1, ... }\n      // Non-paginated returns: [...]\n      const data = res.data?.data ? res.data.data : (Array.isArray(res.data) ? res.data : []);\n      \n      console.log(\"Fetched products:\", data.length, \"items\");\n      setProducts(Array.isArray(data) ? data : []);\n      setLoading(false);\n    } catch (err) {\n      console.error(\"Error fetching products:\", err);\n      setError(\"Failed to load products\");\n      setLoading(false);\n    }\n  }, [page, perPage]);\n\n  // Fetch categories\n  useEffect(() => {\n    const fetchCategories = async () => {\n      try {\n        const response = await api.get(\"/categories\");\n        if (response.data && response.data.length > 0) {\n          setCategories(response.data);\n        }\n      } catch (err) {\n        console.error(\"Failed to fetch categories:\", err);\n      }\n    };\n    fetchCategories();\n  }, []);\n\n  useEffect(() => {\n    setLoading(true);\n    fetchProducts({ page: 1 });\n\n    const interval = setInterval(() => {\n      fetchProducts({ page: 1 });\n    }, 5000);\n\n    return () => clearInterval(interval);\n  }, [fetchProducts]);\n\n  const displayedProducts = useMemo(() => {\n    const q = (search || \"\").trim().toLowerCase();\n    const cat = selectedCategory === \"all\" ? null : String(selectedCategory).toLowerCase();\n\n    const filtered = (Array.isArray(products) ? products : []).filter((p) => {\n      if (cat) {\n        const categoryName = String(p.category?.name || \"\").trim().toLowerCase();\n        if (categoryName !== cat) return false;\n      }\n\n      if (!q) return true;\n      const name = String(p.name || \"\").toLowerCase();\n      const categoryName = String(p.category?.name || \"\").toLowerCase();\n      return name.includes(q) || categoryName.includes(q);\n    });\n\n    const sorted = [...filtered].sort((a, b) => {\n      const ap = Number(a.base_price) || 0;\n      const bp = Number(b.base_price) || 0;\n      return priceSort === \"desc\" ? bp - ap : ap - bp;\n    });\n\n    return sorted;\n  }, [products, search, selectedCategory, priceSort]);\n\n  const stats = useMemo(() => {\n    const total = displayedProducts.length;\n    const available = displayedProducts.filter((p) => {\n      const v = p.is_available;\n      return v === true || v === 1 || v === \"1\";\n    }).length;\n    const unavailable = total - available;\n    const recent = [...displayedProducts]\n      .sort(\n        (a, b) =>\n          new Date(b.created_at || 0) - new Date(a.created_at || 0)\n      )\n      .slice(0, 6);\n\n    return { total, available, unavailable, recent };\n  }, [displayedProducts]);\n\n  // Open Edit Modal\n  const handleEditClick = (product) => {\n    setEditingProduct(product);\n    setEditForm({\n      name: product.name || \"\",\n      category_id: product.category_id || product.category?.id || \"\",\n      base_price: formatMoney(product.base_price),\n      // Convert to string for select compatibility\n      is_available: product.is_available === 1 || product.is_available === true ? \"1\" : \"0\",\n      description: product.description || \"\",\n      image: null,\n    });\n    setEditPreview(product.image_url ? getImageUrl(product.image_url) : null);\n    setEditModalOpen(true);\n  };\n\n  // Close Edit Modal\n  const handleCloseEditModal = () => {\n    setEditModalOpen(false);\n    setEditingProduct(null);\n    setEditPreview(null);\n    setEditForm({\n      name: \"\",\n      category_id: \"\",\n      base_price: \"\",\n      is_available: true,\n      description: \"\",\n      image: null,\n    });\n  };\n\n  // Handle Edit Form Change\n  const handleEditChange = (e) => {\n    const { name, value, files } = e.target;\n\n    if (files && files.length > 0) {\n      const file = files[0];\n      // Validate file type\n      if (!file.type.startsWith('image/')) {\n        toast.error(\"Please select a valid image file\");\n        return;\n      }\n      // Validate file size (max 5MB)\n      if (file.size > 5 * 1024 * 1024) {\n        toast.error(\"Image size must be less than 5MB\");\n        return;\n      }\n      setEditForm({ ...editForm, image: file });\n      setEditPreview(URL.createObjectURL(file));\n    } else if (name === \"is_available\") {\n      // Always store as string \"1\" or \"0\"\n      setEditForm({ ...editForm, is_available: value });\n    } else {\n      setEditForm({ ...editForm, [name]: value });\n    }\n  };\n\n  // Submit Edit\n  const handleEditSubmit = async (e) => {\n    e.preventDefault();\n    setEditLoading(true);\n\n    try {\n      // Validate required fields\n      if (!editForm.name || !editForm.category_id || !editForm.base_price) {\n        toast.error(\"Please fill in all required fields\");\n        setEditLoading(false);\n        return;\n      }\n\n      const categoryId = parseInt(editForm.category_id);\n      if (isNaN(categoryId) || categoryId <= 0) {\n        toast.error(\"Please select a valid category\");\n        setEditLoading(false);\n        return;\n      }\n\n      const basePrice = parseFloat(editForm.base_price);\n      if (isNaN(basePrice) || basePrice < 0) {\n        toast.error(\"Please enter a valid price\");\n        setEditLoading(false);\n        return;\n      }\n\n      const fd = new FormData();\n      fd.append(\"_method\", \"PUT\");\n      fd.append(\"name\", editForm.name.trim());\n      fd.append(\"category_id\", categoryId.toString());\n      fd.append(\"base_price\", basePrice.toFixed(2));\n      // Always send as string \"1\" or \"0\"\n      fd.append(\"is_available\", editForm.is_available);\n      fd.append(\"description\", (editForm.description || \"\").trim());\n      if (editForm.image && editForm.image instanceof File) {\n        fd.append(\"image\", editForm.image);\n      }\n\n      console.log(\"Edit FormData entries:\");\n      for (const [k, v] of fd.entries()) {\n        console.log(`${k}:`, v instanceof File ? `File(${v.name}, ${v.size} bytes)` : v);\n      }\n\n      const response = await api.post(`/products/${editingProduct.id}`, fd);\n      console.log(\"Update response:\", response.data);\n      \n      toast.success(\"Product updated successfully!\");\n      handleCloseEditModal();\n      \n      // Refresh products to see the updated image\n      await fetchProducts({ page: 1 });\n    } catch (err) {\n      console.error(\"Product update error:\", err);\n      console.error(\"Error response:\", err.response?.data);\n      if (err.response?.data?.errors) {\n        const errors = err.response.data.errors;\n        const errorMessages = Object.values(errors).flat();\n        errorMessages.forEach((msg) => toast.error(msg));\n      } else {\n        toast.error(err.response?.data?.message || \"Failed to update product\");\n      }\n    } finally {\n      setEditLoading(false);\n    }\n  };\n\n  // Open Delete Modal\n  const handleDeleteClick = (product) => {\n    setDeletingProduct(product);\n    setDeleteModalOpen(true);\n  };\n\n  // Close Delete Modal\n  const handleCloseDeleteModal = () => {\n    setDeleteModalOpen(false);\n    setDeletingProduct(null);\n  };\n\n  // Confirm Delete\n  const handleConfirmDelete = async () => {\n    setDeleteLoading(true);\n\n    try {\n      await api.delete(`/products/${deletingProduct.id}`);\n      toast.success(\"Product deleted successfully!\");\n      handleCloseDeleteModal();\n      fetchProducts({ page: 1 }); // Refresh products\n    } catch (err) {\n      console.error(\"Product delete error:\", err);\n      toast.error(err.response?.data?.message || \"Failed to delete product\");\n    } finally {\n      setDeleteLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"flex h-screen bg-[#E6E6E6] overflow-hidden\">\n      <AdminSidebar />\n\n      {/* Right content */}\n      <div\n        className={`flex-1 flex flex-col min-w-0 transition-all duration-300 ${\n          collapsed ? \"ml-0\" : \"lg:ml-64 ml-0\"\n        }`}\n      >\n        {/* TOPBAR – FLUSH TO TOP */}\n        <AdminTopbar toggleSidebar={toggle} isSidebarOpen={!collapsed} />\n\n        {/* PAGE CONTENT - Scrollable */}\n        <div className=\"flex-1 p-6 overflow-y-auto\">\n          {/* HEADER */}\n          <header className=\"flex flex-wrap items-center justify-between gap-4 mb-6\">\n            <div>\n              <h1 className=\"text-4xl font-bold text-[#5A381E]\">\n                Dashboard\n              </h1>\n              <p className=\"text-sm text-gray-500\">\n                Overview of products and recent activity\n              </p>\n            </div>\n\n            {/* ACTIONS */}\n            <div className=\"flex flex-wrap items-center gap-3\">\n              <input\n                type=\"text\"\n                placeholder=\"Search products...\"\n                value={search}\n                onChange={(e) => setSearch(e.target.value)}\n                className=\"w-56 px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-[#B3611B]\"\n              />\n\n              <select\n                value={selectedCategory}\n                onChange={(e) => setSelectedCategory(e.target.value)}\n                className=\"px-3 py-2 border border-gray-300 rounded-lg text-sm bg-white focus:outline-none focus:ring-2 focus:ring-[#B3611B]\"\n                aria-label=\"Sort categories\"\n              >\n                <option value=\"all\">All categories</option>\n                <option value=\"cake\">Cake</option>\n                <option value=\"bread\">Bread</option>\n                <option value=\"pastry\">Pastry</option>\n                <option value=\"cupcake\">Cupcake</option>\n                <option value=\"cookies\">Cookies</option>\n              </select>\n\n              <select\n                value={priceSort}\n                onChange={(e) => setPriceSort(e.target.value)}\n                className=\"px-3 py-2 border border-gray-300 rounded-lg text-sm bg-white focus:outline-none focus:ring-2 focus:ring-[#B3611B]\"\n                aria-label=\"Sort by price\"\n              >\n                <option value=\"asc\">Price: lowest - highest</option>\n                <option value=\"desc\">Price: highest - lowest</option>\n              </select>\n            </div>\n          </header>\n\n          {/* STATS */}\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6\">\n            <div className=\"bg-white p-5 rounded-xl shadow\">\n              <div className=\"text-sm text-gray-600\">Total Products</div>\n              <div className=\"text-3xl font-bold text-[#5A381E]\">\n                {stats.total}\n              </div>\n            </div>\n\n            <div className=\"bg-white p-5 rounded-xl shadow\">\n              <div className=\"text-sm text-gray-600\">Available</div>\n              <div className=\"text-3xl font-bold text-green-600\">\n                {stats.available}\n              </div>\n            </div>\n\n            <div className=\"bg-white p-5 rounded-xl shadow\">\n              <div className=\"text-sm text-gray-600\">Out of Stock</div>\n              <div className=\"text-3xl font-bold text-red-600\">\n                {stats.unavailable}\n              </div>\n            </div>\n          </div>\n\n          {/* Recent Products - Standalone Card */}\n          <div className=\"bg-white rounded-xl p-5 shadow border border-gray-200 mb-6\">\n            <div className=\"flex items-center justify-between mb-4\">\n              <h3 className=\"text-lg font-semibold text-[#5A381E]\">Recent Products</h3>\n              <span className=\"text-xs text-gray-500\">Latest</span>\n            </div>\n\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\n              {stats.recent.length === 0 && (\n                <div className=\"col-span-full text-sm text-gray-500 text-center py-4\">\n                  No recent products\n                </div>\n              )}\n\n              {stats.recent.slice(0, 4).map((p) => (\n                <div\n                  key={p.id}\n                  className=\"flex flex-col items-center p-3 border border-gray-200 rounded-lg hover:shadow-md transition\"\n                >\n                  <img\n                    src={getImageUrl(p.image_url)}\n                    alt={p.name}\n                    className=\"w-16 h-16 rounded object-cover border mb-2\"\n                  />\n                  <div className=\"text-center w-full\">\n                    <div className=\"font-medium text-sm text-gray-800 truncate\">{p.name}</div>\n                    <div className=\"text-xs text-gray-400 mb-1\">{p.category?.name || \"—\"}</div>\n                    <div className=\"text-sm font-semibold text-[#B3611B]\">\n                      ₱{Number(p.base_price).toFixed(2)}\n                    </div>\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n\n          {/* TABLE */}\n          <div className=\"bg-white rounded-xl shadow overflow-x-auto\">\n            <table className=\"min-w-full\">\n              <thead className=\"bg-[#F7F3EF] text-sm text-gray-600\">\n                <tr>\n                  <th className=\"px-4 py-3 text-left\">#</th>\n                  <th className=\"px-4 py-3 text-left\">Image</th>\n                  <th className=\"px-4 py-3 text-left\">Name</th>\n                  <th className=\"px-4 py-3 text-left\">Category</th>\n                  <th className=\"px-4 py-3 text-right\">Price</th>\n                  <th className=\"px-4 py-3 text-center\">Status</th>\n                  <th className=\"px-4 py-3 text-center\">Actions</th>\n                </tr>\n              </thead>\n\n              <tbody className=\"divide-y\">\n                {loading && (\n                  <tr>\n                    <td colSpan=\"7\" className=\"p-6 text-center\">\n                      Loading products...\n                    </td>\n                  </tr>\n                )}\n\n                {!loading && products.length === 0 && (\n                  <tr>\n                    <td colSpan=\"7\" className=\"p-6 text-center\">\n                      No products found.\n                    </td>\n                  </tr>\n                )}\n                \n                {!loading && products.length > 0 && displayedProducts.length === 0 && (\n                  <tr>\n                    <td colSpan=\"7\" className=\"p-6 text-center\">\n                      No products found.\n                    </td>\n                  </tr>\n                )}\n\n                {!loading &&\n                  displayedProducts.map((p, idx) => (\n                    <tr key={p.id} className=\"hover:bg-[#FFF9F5]\">\n                      <td className=\"px-4 py-3\">{idx + 1}</td>\n                      <td className=\"px-4 py-3\">\n                        <img\n                          src={getImageUrl(p.image_url)}\n                          alt={p.name}\n                          className=\"w-12 h-12 rounded object-cover border\"\n                        />\n                      </td>\n                      <td className=\"px-4 py-3\">{p.name}</td>\n                      <td className=\"px-4 py-3\">\n                        {p.category?.name || \"-\"}\n                      </td>\n                      <td className=\"px-4 py-3 text-right\">\n                        ₱{Number(p.base_price).toFixed(2)}\n                      </td>\n                      <td className=\"px-4 py-3 text-center\">\n                        {p.is_available === true || p.is_available === 1 || p.is_available === \"1\" ? (\n                          <span className=\"px-3 py-1 text-xs bg-green-100 text-green-700 rounded-full\">\n                            Available\n                          </span>\n                        ) : (\n                          <span className=\"px-3 py-1 text-xs bg-red-100 text-red-700 rounded-full\">\n                            Out of Stock\n                          </span>\n                        )}\n                      </td>\n                      <td className=\"px-4 py-3 text-center\">\n                        <div className=\"flex items-center justify-center gap-2\">\n                          <button\n                            onClick={() => handleEditClick(p)}\n                            className=\"p-2 text-[#B3611B] hover:bg-[#B3611B] hover:text-white rounded-lg transition\"\n                            title=\"Edit product\"\n                          >\n                            <FiEdit />\n                          </button>\n                          <button\n                            onClick={() => handleDeleteClick(p)}\n                            className=\"p-2 text-red-600 hover:bg-red-600 hover:text-white rounded-lg transition\"\n                            title=\"Delete product\"\n                          >\n                            <FiTrash2 />\n                          </button>\n                        </div>\n                      </td>\n                    </tr>\n                  ))}\n              </tbody>\n            </table>\n          </div>\n\n          {error && <div className=\"mt-4 text-red-500\">{error}</div>}\n        </div>\n      </div>\n\n      {/* Edit Product Modal */}\n      {editModalOpen && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n          <div className=\"bg-white rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto m-4\">\n            <div className=\"sticky top-0 bg-white border-b px-6 py-4 flex items-center justify-between\">\n              <h2 className=\"text-2xl font-bold text-[#5A381E]\">Edit Product</h2>\n              <button\n                onClick={handleCloseEditModal}\n                className=\"p-2 hover:bg-gray-100 rounded-lg transition\"\n              >\n                <FiX className=\"text-xl\" />\n              </button>\n            </div>\n\n            <form onSubmit={handleEditSubmit} className=\"p-6\">\n              <div className=\"grid grid-cols-2 gap-6\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    Name *\n                  </label>\n                  <input\n                    name=\"name\"\n                    value={editForm.name}\n                    onChange={handleEditChange}\n                    required\n                    className=\"w-full border border-gray-300 px-3 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#B3611B]\"\n                    placeholder=\"Enter product name\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    Category *\n                  </label>\n                  <select\n                    name=\"category_id\"\n                    value={editForm.category_id || \"\"}\n                    onChange={handleEditChange}\n                    required\n                    className=\"w-full border border-gray-300 px-3 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#B3611B]\"\n                  >\n                    <option value=\"\">Select category</option>\n                    {categories.map((cat) => (\n                      <option key={cat.id} value={cat.id}>\n                        {cat.name}\n                      </option>\n                    ))}\n                  </select>\n                </div>\n\n                {/* Image Upload */}\n                <div className=\"col-span-2\">\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    Image\n                  </label>\n                  {!editPreview ? (\n                    <div className=\"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center\">\n                      <p className=\"text-gray-600 mb-2\">No image selected</p>\n                      <input\n                        type=\"file\"\n                        name=\"image\"\n                        accept=\"image/*\"\n                        onChange={handleEditChange}\n                        className=\"hidden\"\n                        id=\"edit-image-upload\"\n                      />\n                      <label\n                        htmlFor=\"edit-image-upload\"\n                        className=\"cursor-pointer text-[#B3611B] hover:underline\"\n                      >\n                        Browse files\n                      </label>\n                    </div>\n                  ) : (\n                    <div className=\"relative\">\n                      <img\n                        src={editPreview}\n                        className=\"w-full h-48 object-cover rounded-lg border border-gray-300\"\n                        alt=\"Preview\"\n                      />\n                      <button\n                        type=\"button\"\n                        onClick={() => {\n                          setEditForm({ ...editForm, image: null });\n                          setEditPreview(\n                            editingProduct?.image_url\n                              ? getImageUrl(editingProduct.image_url)\n                              : null\n                          );\n                        }}\n                        className=\"absolute top-2 right-2 bg-red-500 text-white p-2 rounded-full hover:bg-red-600\"\n                      >\n                        <FiTrash2 />\n                      </button>\n                    </div>\n                  )}\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    Price *\n                  </label>\n                  <div className=\"relative\">\n                    <span className=\"absolute left-3 top-2 text-gray-500\">₱</span>\n                    <input\n                      type=\"number\"\n                      step=\"0.01\"\n                      min=\"0\"\n                      name=\"base_price\"\n                      value={editForm.base_price}\n                      onChange={handleEditChange}\n                      onBlur={() =>\n                        setEditForm((prev) => ({\n                          ...prev,\n                          base_price: formatMoney(prev.base_price),\n                        }))\n                      }\n                      required\n                      className=\"w-full border border-gray-300 px-3 py-2 pl-8 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#B3611B]\"\n                      placeholder=\"0.00\"\n                    />\n                  </div>\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    Availability\n                  </label>\n                  <select\n                    name=\"is_available\"\n                    value={editForm.is_available}\n                    onChange={handleEditChange}\n                    className=\"w-full border border-gray-300 px-3 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#B3611B]\"\n                  >\n                    <option value=\"1\">Available</option>\n                    <option value=\"0\">Out of Stock</option>\n                  </select>\n                </div>\n\n                <div className=\"col-span-2\">\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    Description\n                  </label>\n                  <textarea\n                    name=\"description\"\n                    value={editForm.description}\n                    onChange={handleEditChange}\n                    className=\"w-full border border-gray-300 px-3 py-2 rounded-lg h-32 focus:outline-none focus:ring-2 focus:ring-[#B3611B]\"\n                    placeholder=\"Enter product description\"\n                  ></textarea>\n                </div>\n              </div>\n\n              <div className=\"flex justify-end gap-3 mt-6\">\n                <button\n                  type=\"button\"\n                  onClick={handleCloseEditModal}\n                  className=\"px-6 py-2 border-2 border-gray-300 text-gray-700 rounded-lg font-semibold hover:bg-gray-100 transition\"\n                >\n                  Cancel\n                </button>\n                <button\n                  type=\"submit\"\n                  disabled={editLoading}\n                  className=\"px-6 py-2 bg-[#B3611B] text-white rounded-lg font-semibold hover:bg-[#9a5015] transition disabled:opacity-50 disabled:cursor-not-allowed\"\n                >\n                  {editLoading ? \"Updating...\" : \"Update Product\"}\n                </button>\n              </div>\n            </form>\n          </div>\n        </div>\n      )}\n\n      {/* Delete Confirmation Modal */}\n      {deleteModalOpen && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n          <div className=\"bg-white rounded-xl shadow-2xl w-full max-w-md m-4\">\n            <div className=\"p-6\">\n              <div className=\"flex items-center justify-between mb-4\">\n                <h2 className=\"text-2xl font-bold text-red-600\">Delete Product</h2>\n                <button\n                  onClick={handleCloseDeleteModal}\n                  className=\"p-2 hover:bg-gray-100 rounded-lg transition\"\n                >\n                  <FiX className=\"text-xl\" />\n                </button>\n              </div>\n\n              <div className=\"mb-6\">\n                <p className=\"text-gray-700 mb-2\">\n                  Are you sure you want to delete this product?\n                </p>\n                {deletingProduct && (\n                  <div className=\"bg-gray-50 p-4 rounded-lg\">\n                    <p className=\"font-semibold text-gray-800\">{deletingProduct.name}</p>\n                    <p className=\"text-sm text-gray-500 mt-1\">\n                      This action cannot be undone.\n                    </p>\n                  </div>\n                )}\n              </div>\n\n              <div className=\"flex justify-end gap-3\">\n                <button\n                  type=\"button\"\n                  onClick={handleCloseDeleteModal}\n                  disabled={deleteLoading}\n                  className=\"px-6 py-2 border-2 border-gray-300 text-gray-700 rounded-lg font-semibold hover:bg-gray-100 transition disabled:opacity-50\"\n                >\n                  Cancel\n                </button>\n                <button\n                  type=\"button\"\n                  onClick={handleConfirmDelete}\n                  disabled={deleteLoading}\n                  className=\"px-6 py-2 bg-red-600 text-white rounded-lg font-semibold hover:bg-red-700 transition disabled:opacity-50 disabled:cursor-not-allowed\"\n                >\n                  {deleteLoading ? \"Deleting...\" : \"Confirm Delete\"}\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n\n"],"mappings":"+IAAA;AACA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,OAAO,CAAEC,QAAQ,CAAEC,WAAW,KAAQ,OAAO,CACxE,MAAO,CAAAC,GAAG,KAAM,eAAe,CAC/B,OAASC,OAAO,KAAQ,2BAA2B,CACnD,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,MAAO,CAAAC,YAAY,KAAM,2BAA2B,CACpD,MAAO,CAAAC,WAAW,KAAM,0BAA0B,CAClD,OAASC,UAAU,KAAQ,8BAA8B,CACzD,OAASC,MAAM,CAAEC,QAAQ,CAAEC,GAAG,KAAQ,gBAAgB,CACtD,MAAO,CAAAC,KAAK,KAAM,iBAAiB,CACnC,OAASC,WAAW,KAAQ,sBAAsB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEnD,cAAe,SAAS,CAAAC,cAAcA,CAAA,CAAG,CACvC,KAAM,CAAEC,IAAK,CAAC,CAAGf,OAAO,CAAC,CAAC,CAC1B,KAAM,CAAAgB,QAAQ,CAAGf,WAAW,CAAC,CAAC,CAC9B,KAAM,CAAEgB,SAAS,CAAEC,MAAO,CAAC,CAAGd,UAAU,CAAC,CAAC,CAE1CT,SAAS,CAAC,IAAM,CACd,GAAI,CAACoB,IAAI,CAAE,OACX,GAAIA,IAAI,CAACI,IAAI,GAAK,OAAO,CAAE,CACzBH,QAAQ,CAAC,GAAG,CAAE,CAAEI,OAAO,CAAE,IAAK,CAAC,CAAC,CAClC,CACF,CAAC,CAAE,CAACL,IAAI,CAAEC,QAAQ,CAAC,CAAC,CAEpB,KAAM,CAACK,QAAQ,CAAEC,WAAW,CAAC,CAAGzB,QAAQ,CAAC,EAAE,CAAC,CAC5C,KAAM,CAAC0B,OAAO,CAAEC,UAAU,CAAC,CAAG3B,QAAQ,CAAC,IAAI,CAAC,CAC5C,KAAM,CAAC4B,KAAK,CAAEC,QAAQ,CAAC,CAAG7B,QAAQ,CAAC,IAAI,CAAC,CACxC,KAAM,CAAC8B,MAAM,CAAEC,SAAS,CAAC,CAAG/B,QAAQ,CAAC,EAAE,CAAC,CACxC,KAAM,CAACgC,gBAAgB,CAAEC,mBAAmB,CAAC,CAAGjC,QAAQ,CAAC,KAAK,CAAC,CAAE;AACjE,KAAM,CAACkC,SAAS,CAAEC,YAAY,CAAC,CAAGnC,QAAQ,CAAC,KAAK,CAAC,CAAE;AACnD,KAAM,CAACoC,OAAO,CAAC,CAAGpC,QAAQ,CAAC,EAAE,CAAC,CAC9B,KAAM,CAACqC,IAAI,CAAC,CAAGrC,QAAQ,CAAC,CAAC,CAAC,CAE1B;AACA,KAAM,CAACsC,aAAa,CAAEC,gBAAgB,CAAC,CAAGvC,QAAQ,CAAC,KAAK,CAAC,CACzD,KAAM,CAACwC,cAAc,CAAEC,iBAAiB,CAAC,CAAGzC,QAAQ,CAAC,IAAI,CAAC,CAC1D,KAAM,CAAC0C,QAAQ,CAAEC,WAAW,CAAC,CAAG3C,QAAQ,CAAC,CACvC4C,IAAI,CAAE,EAAE,CACRC,WAAW,CAAE,EAAE,CACfC,UAAU,CAAE,EAAE,CACdC,YAAY,CAAE,IAAI,CAClBC,WAAW,CAAE,EAAE,CACfC,KAAK,CAAE,IACT,CAAC,CAAC,CACF,KAAM,CAACC,WAAW,CAAEC,cAAc,CAAC,CAAGnD,QAAQ,CAAC,IAAI,CAAC,CACpD,KAAM,CAACoD,WAAW,CAAEC,cAAc,CAAC,CAAGrD,QAAQ,CAAC,KAAK,CAAC,CACrD,KAAM,CAACsD,UAAU,CAAEC,aAAa,CAAC,CAAGvD,QAAQ,CAAC,EAAE,CAAC,CAEhD;AACA,KAAM,CAACwD,eAAe,CAAEC,kBAAkB,CAAC,CAAGzD,QAAQ,CAAC,KAAK,CAAC,CAC7D,KAAM,CAAC0D,eAAe,CAAEC,kBAAkB,CAAC,CAAG3D,QAAQ,CAAC,IAAI,CAAC,CAC5D,KAAM,CAAC4D,aAAa,CAAEC,gBAAgB,CAAC,CAAG7D,QAAQ,CAAC,KAAK,CAAC,CAEzD,KAAM,CAAA8D,WAAW,CAAIC,KAAK,EAAK,CAC7B,KAAM,CAAAC,CAAC,CAAGC,MAAM,CAACF,KAAK,CAAC,CACvB,MAAO,CAAAE,MAAM,CAACC,QAAQ,CAACF,CAAC,CAAC,CAAGA,CAAC,CAACG,OAAO,CAAC,CAAC,CAAC,CAAG,EAAE,CAC/C,CAAC,CAED,KAAM,CAAAC,aAAa,CAAGnE,WAAW,CAAC,gBAAqB,IAAd,CAAAoE,IAAI,CAAAC,SAAA,CAAAC,MAAA,IAAAD,SAAA,MAAAE,SAAA,CAAAF,SAAA,IAAG,CAAC,CAAC,CAChDzC,QAAQ,CAAC,IAAI,CAAC,CACd,GAAI,KAAA4C,SAAA,CACF,KAAM,CAAAC,MAAM,CAAG,CACbrC,IAAI,CAAEgC,IAAI,CAAChC,IAAI,EAAIA,IAAI,CACvBsC,QAAQ,CAAEN,IAAI,CAACM,QAAQ,EAAIvC,OAC7B,CAAC,CAED,KAAM,CAAAwC,GAAG,CAAG,KAAM,CAAA1E,GAAG,CAAC2E,GAAG,CAAC,WAAW,CAAE,CAAEH,MAAO,CAAC,CAAC,CAElD;AACA;AACA;AACA,KAAM,CAAAI,IAAI,CAAG,CAAAL,SAAA,CAAAG,GAAG,CAACE,IAAI,UAAAL,SAAA,WAARA,SAAA,CAAUK,IAAI,CAAGF,GAAG,CAACE,IAAI,CAACA,IAAI,CAAIC,KAAK,CAACC,OAAO,CAACJ,GAAG,CAACE,IAAI,CAAC,CAAGF,GAAG,CAACE,IAAI,CAAG,EAAG,CAEvFG,OAAO,CAACC,GAAG,CAAC,mBAAmB,CAAEJ,IAAI,CAACP,MAAM,CAAE,OAAO,CAAC,CACtD9C,WAAW,CAACsD,KAAK,CAACC,OAAO,CAACF,IAAI,CAAC,CAAGA,IAAI,CAAG,EAAE,CAAC,CAC5CnD,UAAU,CAAC,KAAK,CAAC,CACnB,CAAE,MAAOwD,GAAG,CAAE,CACZF,OAAO,CAACrD,KAAK,CAAC,0BAA0B,CAAEuD,GAAG,CAAC,CAC9CtD,QAAQ,CAAC,yBAAyB,CAAC,CACnCF,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAAE,CAACU,IAAI,CAAED,OAAO,CAAC,CAAC,CAEnB;AACAtC,SAAS,CAAC,IAAM,CACd,KAAM,CAAAsF,eAAe,CAAG,KAAAA,CAAA,GAAY,CAClC,GAAI,CACF,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAnF,GAAG,CAAC2E,GAAG,CAAC,aAAa,CAAC,CAC7C,GAAIQ,QAAQ,CAACP,IAAI,EAAIO,QAAQ,CAACP,IAAI,CAACP,MAAM,CAAG,CAAC,CAAE,CAC7ChB,aAAa,CAAC8B,QAAQ,CAACP,IAAI,CAAC,CAC9B,CACF,CAAE,MAAOK,GAAG,CAAE,CACZF,OAAO,CAACrD,KAAK,CAAC,6BAA6B,CAAEuD,GAAG,CAAC,CACnD,CACF,CAAC,CACDC,eAAe,CAAC,CAAC,CACnB,CAAC,CAAE,EAAE,CAAC,CAENtF,SAAS,CAAC,IAAM,CACd6B,UAAU,CAAC,IAAI,CAAC,CAChByC,aAAa,CAAC,CAAE/B,IAAI,CAAE,CAAE,CAAC,CAAC,CAE1B,KAAM,CAAAiD,QAAQ,CAAGC,WAAW,CAAC,IAAM,CACjCnB,aAAa,CAAC,CAAE/B,IAAI,CAAE,CAAE,CAAC,CAAC,CAC5B,CAAC,CAAE,IAAI,CAAC,CAER,MAAO,IAAMmD,aAAa,CAACF,QAAQ,CAAC,CACtC,CAAC,CAAE,CAAClB,aAAa,CAAC,CAAC,CAEnB,KAAM,CAAAqB,iBAAiB,CAAG1F,OAAO,CAAC,IAAM,CACtC,KAAM,CAAA2F,CAAC,CAAG,CAAC5D,MAAM,EAAI,EAAE,EAAE6D,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,CAC7C,KAAM,CAAAC,GAAG,CAAG7D,gBAAgB,GAAK,KAAK,CAAG,IAAI,CAAG8D,MAAM,CAAC9D,gBAAgB,CAAC,CAAC4D,WAAW,CAAC,CAAC,CAEtF,KAAM,CAAAG,QAAQ,CAAG,CAAChB,KAAK,CAACC,OAAO,CAACxD,QAAQ,CAAC,CAAGA,QAAQ,CAAG,EAAE,EAAEwE,MAAM,CAAEC,CAAC,EAAK,KAAAC,YAAA,CACvE,GAAIL,GAAG,CAAE,KAAAM,WAAA,CACP,KAAM,CAAAC,YAAY,CAAGN,MAAM,CAAC,EAAAK,WAAA,CAAAF,CAAC,CAACI,QAAQ,UAAAF,WAAA,iBAAVA,WAAA,CAAYvD,IAAI,GAAI,EAAE,CAAC,CAAC+C,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,CACxE,GAAIQ,YAAY,GAAKP,GAAG,CAAE,MAAO,MAAK,CACxC,CAEA,GAAI,CAACH,CAAC,CAAE,MAAO,KAAI,CACnB,KAAM,CAAA9C,IAAI,CAAGkD,MAAM,CAACG,CAAC,CAACrD,IAAI,EAAI,EAAE,CAAC,CAACgD,WAAW,CAAC,CAAC,CAC/C,KAAM,CAAAQ,YAAY,CAAGN,MAAM,CAAC,EAAAI,YAAA,CAAAD,CAAC,CAACI,QAAQ,UAAAH,YAAA,iBAAVA,YAAA,CAAYtD,IAAI,GAAI,EAAE,CAAC,CAACgD,WAAW,CAAC,CAAC,CACjE,MAAO,CAAAhD,IAAI,CAAC0D,QAAQ,CAACZ,CAAC,CAAC,EAAIU,YAAY,CAACE,QAAQ,CAACZ,CAAC,CAAC,CACrD,CAAC,CAAC,CAEF,KAAM,CAAAa,MAAM,CAAG,CAAC,GAAGR,QAAQ,CAAC,CAACS,IAAI,CAAC,CAACC,CAAC,CAAEC,CAAC,GAAK,CAC1C,KAAM,CAAAC,EAAE,CAAG1C,MAAM,CAACwC,CAAC,CAAC3D,UAAU,CAAC,EAAI,CAAC,CACpC,KAAM,CAAA8D,EAAE,CAAG3C,MAAM,CAACyC,CAAC,CAAC5D,UAAU,CAAC,EAAI,CAAC,CACpC,MAAO,CAAAZ,SAAS,GAAK,MAAM,CAAG0E,EAAE,CAAGD,EAAE,CAAGA,EAAE,CAAGC,EAAE,CACjD,CAAC,CAAC,CAEF,MAAO,CAAAL,MAAM,CACf,CAAC,CAAE,CAAC/E,QAAQ,CAAEM,MAAM,CAAEE,gBAAgB,CAAEE,SAAS,CAAC,CAAC,CAEnD,KAAM,CAAA2E,KAAK,CAAG9G,OAAO,CAAC,IAAM,CAC1B,KAAM,CAAA+G,KAAK,CAAGrB,iBAAiB,CAAClB,MAAM,CACtC,KAAM,CAAAwC,SAAS,CAAGtB,iBAAiB,CAACO,MAAM,CAAEC,CAAC,EAAK,CAChD,KAAM,CAAAe,CAAC,CAAGf,CAAC,CAAClD,YAAY,CACxB,MAAO,CAAAiE,CAAC,GAAK,IAAI,EAAIA,CAAC,GAAK,CAAC,EAAIA,CAAC,GAAK,GAAG,CAC3C,CAAC,CAAC,CAACzC,MAAM,CACT,KAAM,CAAA0C,WAAW,CAAGH,KAAK,CAAGC,SAAS,CACrC,KAAM,CAAAG,MAAM,CAAG,CAAC,GAAGzB,iBAAiB,CAAC,CAClCe,IAAI,CACH,CAACC,CAAC,CAAEC,CAAC,GACH,GAAI,CAAAS,IAAI,CAACT,CAAC,CAACU,UAAU,EAAI,CAAC,CAAC,CAAG,GAAI,CAAAD,IAAI,CAACV,CAAC,CAACW,UAAU,EAAI,CAAC,CAC5D,CAAC,CACAC,KAAK,CAAC,CAAC,CAAE,CAAC,CAAC,CAEd,MAAO,CAAEP,KAAK,CAAEC,SAAS,CAAEE,WAAW,CAAEC,MAAO,CAAC,CAClD,CAAC,CAAE,CAACzB,iBAAiB,CAAC,CAAC,CAEvB;AACA,KAAM,CAAA6B,eAAe,CAAIC,OAAO,EAAK,KAAAC,iBAAA,CACnC/E,iBAAiB,CAAC8E,OAAO,CAAC,CAC1B5E,WAAW,CAAC,CACVC,IAAI,CAAE2E,OAAO,CAAC3E,IAAI,EAAI,EAAE,CACxBC,WAAW,CAAE0E,OAAO,CAAC1E,WAAW,IAAA2E,iBAAA,CAAID,OAAO,CAAClB,QAAQ,UAAAmB,iBAAA,iBAAhBA,iBAAA,CAAkBC,EAAE,GAAI,EAAE,CAC9D3E,UAAU,CAAEgB,WAAW,CAACyD,OAAO,CAACzE,UAAU,CAAC,CAC3C;AACAC,YAAY,CAAEwE,OAAO,CAACxE,YAAY,GAAK,CAAC,EAAIwE,OAAO,CAACxE,YAAY,GAAK,IAAI,CAAG,GAAG,CAAG,GAAG,CACrFC,WAAW,CAAEuE,OAAO,CAACvE,WAAW,EAAI,EAAE,CACtCC,KAAK,CAAE,IACT,CAAC,CAAC,CACFE,cAAc,CAACoE,OAAO,CAACG,SAAS,CAAG9G,WAAW,CAAC2G,OAAO,CAACG,SAAS,CAAC,CAAG,IAAI,CAAC,CACzEnF,gBAAgB,CAAC,IAAI,CAAC,CACxB,CAAC,CAED;AACA,KAAM,CAAAoF,oBAAoB,CAAGA,CAAA,GAAM,CACjCpF,gBAAgB,CAAC,KAAK,CAAC,CACvBE,iBAAiB,CAAC,IAAI,CAAC,CACvBU,cAAc,CAAC,IAAI,CAAC,CACpBR,WAAW,CAAC,CACVC,IAAI,CAAE,EAAE,CACRC,WAAW,CAAE,EAAE,CACfC,UAAU,CAAE,EAAE,CACdC,YAAY,CAAE,IAAI,CAClBC,WAAW,CAAE,EAAE,CACfC,KAAK,CAAE,IACT,CAAC,CAAC,CACJ,CAAC,CAED;AACA,KAAM,CAAA2E,gBAAgB,CAAIC,CAAC,EAAK,CAC9B,KAAM,CAAEjF,IAAI,CAAEmB,KAAK,CAAE+D,KAAM,CAAC,CAAGD,CAAC,CAACE,MAAM,CAEvC,GAAID,KAAK,EAAIA,KAAK,CAACvD,MAAM,CAAG,CAAC,CAAE,CAC7B,KAAM,CAAAyD,IAAI,CAAGF,KAAK,CAAC,CAAC,CAAC,CACrB;AACA,GAAI,CAACE,IAAI,CAACC,IAAI,CAACC,UAAU,CAAC,QAAQ,CAAC,CAAE,CACnCvH,KAAK,CAACiB,KAAK,CAAC,kCAAkC,CAAC,CAC/C,OACF,CACA;AACA,GAAIoG,IAAI,CAACG,IAAI,CAAG,CAAC,CAAG,IAAI,CAAG,IAAI,CAAE,CAC/BxH,KAAK,CAACiB,KAAK,CAAC,kCAAkC,CAAC,CAC/C,OACF,CACAe,WAAW,CAAAyF,aAAA,CAAAA,aAAA,IAAM1F,QAAQ,MAAEO,KAAK,CAAE+E,IAAI,EAAE,CAAC,CACzC7E,cAAc,CAACkF,GAAG,CAACC,eAAe,CAACN,IAAI,CAAC,CAAC,CAC3C,CAAC,IAAM,IAAIpF,IAAI,GAAK,cAAc,CAAE,CAClC;AACAD,WAAW,CAAAyF,aAAA,CAAAA,aAAA,IAAM1F,QAAQ,MAAEK,YAAY,CAAEgB,KAAK,EAAE,CAAC,CACnD,CAAC,IAAM,CACLpB,WAAW,CAAAyF,aAAA,CAAAA,aAAA,IAAM1F,QAAQ,MAAE,CAACE,IAAI,EAAGmB,KAAK,EAAE,CAAC,CAC7C,CACF,CAAC,CAED;AACA,KAAM,CAAAwE,gBAAgB,CAAG,KAAO,CAAAV,CAAC,EAAK,CACpCA,CAAC,CAACW,cAAc,CAAC,CAAC,CAClBnF,cAAc,CAAC,IAAI,CAAC,CAEpB,GAAI,CACF;AACA,GAAI,CAACX,QAAQ,CAACE,IAAI,EAAI,CAACF,QAAQ,CAACG,WAAW,EAAI,CAACH,QAAQ,CAACI,UAAU,CAAE,CACnEnC,KAAK,CAACiB,KAAK,CAAC,oCAAoC,CAAC,CACjDyB,cAAc,CAAC,KAAK,CAAC,CACrB,OACF,CAEA,KAAM,CAAAoF,UAAU,CAAGC,QAAQ,CAAChG,QAAQ,CAACG,WAAW,CAAC,CACjD,GAAI8F,KAAK,CAACF,UAAU,CAAC,EAAIA,UAAU,EAAI,CAAC,CAAE,CACxC9H,KAAK,CAACiB,KAAK,CAAC,gCAAgC,CAAC,CAC7CyB,cAAc,CAAC,KAAK,CAAC,CACrB,OACF,CAEA,KAAM,CAAAuF,SAAS,CAAGC,UAAU,CAACnG,QAAQ,CAACI,UAAU,CAAC,CACjD,GAAI6F,KAAK,CAACC,SAAS,CAAC,EAAIA,SAAS,CAAG,CAAC,CAAE,CACrCjI,KAAK,CAACiB,KAAK,CAAC,4BAA4B,CAAC,CACzCyB,cAAc,CAAC,KAAK,CAAC,CACrB,OACF,CAEA,KAAM,CAAAyF,EAAE,CAAG,GAAI,CAAAC,QAAQ,CAAC,CAAC,CACzBD,EAAE,CAACE,MAAM,CAAC,SAAS,CAAE,KAAK,CAAC,CAC3BF,EAAE,CAACE,MAAM,CAAC,MAAM,CAAEtG,QAAQ,CAACE,IAAI,CAAC+C,IAAI,CAAC,CAAC,CAAC,CACvCmD,EAAE,CAACE,MAAM,CAAC,aAAa,CAAEP,UAAU,CAACQ,QAAQ,CAAC,CAAC,CAAC,CAC/CH,EAAE,CAACE,MAAM,CAAC,YAAY,CAAEJ,SAAS,CAACzE,OAAO,CAAC,CAAC,CAAC,CAAC,CAC7C;AACA2E,EAAE,CAACE,MAAM,CAAC,cAAc,CAAEtG,QAAQ,CAACK,YAAY,CAAC,CAChD+F,EAAE,CAACE,MAAM,CAAC,aAAa,CAAE,CAACtG,QAAQ,CAACM,WAAW,EAAI,EAAE,EAAE2C,IAAI,CAAC,CAAC,CAAC,CAC7D,GAAIjD,QAAQ,CAACO,KAAK,EAAIP,QAAQ,CAACO,KAAK,WAAY,CAAAiG,IAAI,CAAE,CACpDJ,EAAE,CAACE,MAAM,CAAC,OAAO,CAAEtG,QAAQ,CAACO,KAAK,CAAC,CACpC,CAEAgC,OAAO,CAACC,GAAG,CAAC,wBAAwB,CAAC,CACrC,IAAK,KAAM,CAACiE,CAAC,CAAEnC,CAAC,CAAC,EAAI,CAAA8B,EAAE,CAACM,OAAO,CAAC,CAAC,CAAE,CACjCnE,OAAO,CAACC,GAAG,IAAAmE,MAAA,CAAIF,CAAC,MAAKnC,CAAC,WAAY,CAAAkC,IAAI,SAAAG,MAAA,CAAWrC,CAAC,CAACpE,IAAI,OAAAyG,MAAA,CAAKrC,CAAC,CAACmB,IAAI,YAAYnB,CAAC,CAAC,CAClF,CAEA,KAAM,CAAA3B,QAAQ,CAAG,KAAM,CAAAnF,GAAG,CAACoJ,IAAI,cAAAD,MAAA,CAAc7G,cAAc,CAACiF,EAAE,EAAIqB,EAAE,CAAC,CACrE7D,OAAO,CAACC,GAAG,CAAC,kBAAkB,CAAEG,QAAQ,CAACP,IAAI,CAAC,CAE9CnE,KAAK,CAAC4I,OAAO,CAAC,+BAA+B,CAAC,CAC9C5B,oBAAoB,CAAC,CAAC,CAEtB;AACA,KAAM,CAAAvD,aAAa,CAAC,CAAE/B,IAAI,CAAE,CAAE,CAAC,CAAC,CAClC,CAAE,MAAO8C,GAAG,CAAE,KAAAqE,aAAA,CAAAC,cAAA,CAAAC,mBAAA,CACZzE,OAAO,CAACrD,KAAK,CAAC,uBAAuB,CAAEuD,GAAG,CAAC,CAC3CF,OAAO,CAACrD,KAAK,CAAC,iBAAiB,EAAA4H,aAAA,CAAErE,GAAG,CAACE,QAAQ,UAAAmE,aAAA,iBAAZA,aAAA,CAAc1E,IAAI,CAAC,CACpD,IAAA2E,cAAA,CAAItE,GAAG,CAACE,QAAQ,UAAAoE,cAAA,YAAAC,mBAAA,CAAZD,cAAA,CAAc3E,IAAI,UAAA4E,mBAAA,WAAlBA,mBAAA,CAAoBC,MAAM,CAAE,CAC9B,KAAM,CAAAA,MAAM,CAAGxE,GAAG,CAACE,QAAQ,CAACP,IAAI,CAAC6E,MAAM,CACvC,KAAM,CAAAC,aAAa,CAAGC,MAAM,CAACC,MAAM,CAACH,MAAM,CAAC,CAACI,IAAI,CAAC,CAAC,CAClDH,aAAa,CAACI,OAAO,CAAEC,GAAG,EAAKtJ,KAAK,CAACiB,KAAK,CAACqI,GAAG,CAAC,CAAC,CAClD,CAAC,IAAM,KAAAC,cAAA,CAAAC,mBAAA,CACLxJ,KAAK,CAACiB,KAAK,CAAC,EAAAsI,cAAA,CAAA/E,GAAG,CAACE,QAAQ,UAAA6E,cAAA,kBAAAC,mBAAA,CAAZD,cAAA,CAAcpF,IAAI,UAAAqF,mBAAA,iBAAlBA,mBAAA,CAAoBC,OAAO,GAAI,0BAA0B,CAAC,CACxE,CACF,CAAC,OAAS,CACR/G,cAAc,CAAC,KAAK,CAAC,CACvB,CACF,CAAC,CAED;AACA,KAAM,CAAAgH,iBAAiB,CAAI9C,OAAO,EAAK,CACrC5D,kBAAkB,CAAC4D,OAAO,CAAC,CAC3B9D,kBAAkB,CAAC,IAAI,CAAC,CAC1B,CAAC,CAED;AACA,KAAM,CAAA6G,sBAAsB,CAAGA,CAAA,GAAM,CACnC7G,kBAAkB,CAAC,KAAK,CAAC,CACzBE,kBAAkB,CAAC,IAAI,CAAC,CAC1B,CAAC,CAED;AACA,KAAM,CAAA4G,mBAAmB,CAAG,KAAAA,CAAA,GAAY,CACtC1G,gBAAgB,CAAC,IAAI,CAAC,CAEtB,GAAI,CACF,KAAM,CAAA3D,GAAG,CAACsK,MAAM,cAAAnB,MAAA,CAAc3F,eAAe,CAAC+D,EAAE,CAAE,CAAC,CACnD9G,KAAK,CAAC4I,OAAO,CAAC,+BAA+B,CAAC,CAC9Ce,sBAAsB,CAAC,CAAC,CACxBlG,aAAa,CAAC,CAAE/B,IAAI,CAAE,CAAE,CAAC,CAAC,CAAE;AAC9B,CAAE,MAAO8C,GAAG,CAAE,KAAAsF,cAAA,CAAAC,mBAAA,CACZzF,OAAO,CAACrD,KAAK,CAAC,uBAAuB,CAAEuD,GAAG,CAAC,CAC3CxE,KAAK,CAACiB,KAAK,CAAC,EAAA6I,cAAA,CAAAtF,GAAG,CAACE,QAAQ,UAAAoF,cAAA,kBAAAC,mBAAA,CAAZD,cAAA,CAAc3F,IAAI,UAAA4F,mBAAA,iBAAlBA,mBAAA,CAAoBN,OAAO,GAAI,0BAA0B,CAAC,CACxE,CAAC,OAAS,CACRvG,gBAAgB,CAAC,KAAK,CAAC,CACzB,CACF,CAAC,CAED,mBACE7C,KAAA,QAAK2J,SAAS,CAAC,4CAA4C,CAAAC,QAAA,eACzD9J,IAAA,CAACT,YAAY,GAAE,CAAC,cAGhBW,KAAA,QACE2J,SAAS,6DAAAtB,MAAA,CACPjI,SAAS,CAAG,MAAM,CAAG,eAAe,CACnC,CAAAwJ,QAAA,eAGH9J,IAAA,CAACR,WAAW,EAACuK,aAAa,CAAExJ,MAAO,CAACyJ,aAAa,CAAE,CAAC1J,SAAU,CAAE,CAAC,cAGjEJ,KAAA,QAAK2J,SAAS,CAAC,4BAA4B,CAAAC,QAAA,eAEzC5J,KAAA,WAAQ2J,SAAS,CAAC,wDAAwD,CAAAC,QAAA,eACxE5J,KAAA,QAAA4J,QAAA,eACE9J,IAAA,OAAI6J,SAAS,CAAC,mCAAmC,CAAAC,QAAA,CAAC,WAElD,CAAI,CAAC,cACL9J,IAAA,MAAG6J,SAAS,CAAC,uBAAuB,CAAAC,QAAA,CAAC,0CAErC,CAAG,CAAC,EACD,CAAC,cAGN5J,KAAA,QAAK2J,SAAS,CAAC,mCAAmC,CAAAC,QAAA,eAChD9J,IAAA,UACEmH,IAAI,CAAC,MAAM,CACX8C,WAAW,CAAC,oBAAoB,CAChChH,KAAK,CAAEjC,MAAO,CACdkJ,QAAQ,CAAGnD,CAAC,EAAK9F,SAAS,CAAC8F,CAAC,CAACE,MAAM,CAAChE,KAAK,CAAE,CAC3C4G,SAAS,CAAC,+GAA+G,CAC1H,CAAC,cAEF3J,KAAA,WACE+C,KAAK,CAAE/B,gBAAiB,CACxBgJ,QAAQ,CAAGnD,CAAC,EAAK5F,mBAAmB,CAAC4F,CAAC,CAACE,MAAM,CAAChE,KAAK,CAAE,CACrD4G,SAAS,CAAC,mHAAmH,CAC7H,aAAW,iBAAiB,CAAAC,QAAA,eAE5B9J,IAAA,WAAQiD,KAAK,CAAC,KAAK,CAAA6G,QAAA,CAAC,gBAAc,CAAQ,CAAC,cAC3C9J,IAAA,WAAQiD,KAAK,CAAC,MAAM,CAAA6G,QAAA,CAAC,MAAI,CAAQ,CAAC,cAClC9J,IAAA,WAAQiD,KAAK,CAAC,OAAO,CAAA6G,QAAA,CAAC,OAAK,CAAQ,CAAC,cACpC9J,IAAA,WAAQiD,KAAK,CAAC,QAAQ,CAAA6G,QAAA,CAAC,QAAM,CAAQ,CAAC,cACtC9J,IAAA,WAAQiD,KAAK,CAAC,SAAS,CAAA6G,QAAA,CAAC,SAAO,CAAQ,CAAC,cACxC9J,IAAA,WAAQiD,KAAK,CAAC,SAAS,CAAA6G,QAAA,CAAC,SAAO,CAAQ,CAAC,EAClC,CAAC,cAET5J,KAAA,WACE+C,KAAK,CAAE7B,SAAU,CACjB8I,QAAQ,CAAGnD,CAAC,EAAK1F,YAAY,CAAC0F,CAAC,CAACE,MAAM,CAAChE,KAAK,CAAE,CAC9C4G,SAAS,CAAC,mHAAmH,CAC7H,aAAW,eAAe,CAAAC,QAAA,eAE1B9J,IAAA,WAAQiD,KAAK,CAAC,KAAK,CAAA6G,QAAA,CAAC,yBAAuB,CAAQ,CAAC,cACpD9J,IAAA,WAAQiD,KAAK,CAAC,MAAM,CAAA6G,QAAA,CAAC,yBAAuB,CAAQ,CAAC,EAC/C,CAAC,EACN,CAAC,EACA,CAAC,cAGT5J,KAAA,QAAK2J,SAAS,CAAC,4CAA4C,CAAAC,QAAA,eACzD5J,KAAA,QAAK2J,SAAS,CAAC,gCAAgC,CAAAC,QAAA,eAC7C9J,IAAA,QAAK6J,SAAS,CAAC,uBAAuB,CAAAC,QAAA,CAAC,gBAAc,CAAK,CAAC,cAC3D9J,IAAA,QAAK6J,SAAS,CAAC,mCAAmC,CAAAC,QAAA,CAC/C/D,KAAK,CAACC,KAAK,CACT,CAAC,EACH,CAAC,cAEN9F,KAAA,QAAK2J,SAAS,CAAC,gCAAgC,CAAAC,QAAA,eAC7C9J,IAAA,QAAK6J,SAAS,CAAC,uBAAuB,CAAAC,QAAA,CAAC,WAAS,CAAK,CAAC,cACtD9J,IAAA,QAAK6J,SAAS,CAAC,mCAAmC,CAAAC,QAAA,CAC/C/D,KAAK,CAACE,SAAS,CACb,CAAC,EACH,CAAC,cAEN/F,KAAA,QAAK2J,SAAS,CAAC,gCAAgC,CAAAC,QAAA,eAC7C9J,IAAA,QAAK6J,SAAS,CAAC,uBAAuB,CAAAC,QAAA,CAAC,cAAY,CAAK,CAAC,cACzD9J,IAAA,QAAK6J,SAAS,CAAC,iCAAiC,CAAAC,QAAA,CAC7C/D,KAAK,CAACI,WAAW,CACf,CAAC,EACH,CAAC,EACH,CAAC,cAGNjG,KAAA,QAAK2J,SAAS,CAAC,4DAA4D,CAAAC,QAAA,eACzE5J,KAAA,QAAK2J,SAAS,CAAC,wCAAwC,CAAAC,QAAA,eACrD9J,IAAA,OAAI6J,SAAS,CAAC,sCAAsC,CAAAC,QAAA,CAAC,iBAAe,CAAI,CAAC,cACzE9J,IAAA,SAAM6J,SAAS,CAAC,uBAAuB,CAAAC,QAAA,CAAC,QAAM,CAAM,CAAC,EAClD,CAAC,cAEN5J,KAAA,QAAK2J,SAAS,CAAC,sDAAsD,CAAAC,QAAA,EAClE/D,KAAK,CAACK,MAAM,CAAC3C,MAAM,GAAK,CAAC,eACxBzD,IAAA,QAAK6J,SAAS,CAAC,sDAAsD,CAAAC,QAAA,CAAC,oBAEtE,CAAK,CACN,CAEA/D,KAAK,CAACK,MAAM,CAACG,KAAK,CAAC,CAAC,CAAE,CAAC,CAAC,CAAC4D,GAAG,CAAEhF,CAAC,OAAAiF,YAAA,oBAC9BlK,KAAA,QAEE2J,SAAS,CAAC,6FAA6F,CAAAC,QAAA,eAEvG9J,IAAA,QACEqK,GAAG,CAAEvK,WAAW,CAACqF,CAAC,CAACyB,SAAS,CAAE,CAC9B0D,GAAG,CAAEnF,CAAC,CAACrD,IAAK,CACZ+H,SAAS,CAAC,4CAA4C,CACvD,CAAC,cACF3J,KAAA,QAAK2J,SAAS,CAAC,oBAAoB,CAAAC,QAAA,eACjC9J,IAAA,QAAK6J,SAAS,CAAC,4CAA4C,CAAAC,QAAA,CAAE3E,CAAC,CAACrD,IAAI,CAAM,CAAC,cAC1E9B,IAAA,QAAK6J,SAAS,CAAC,4BAA4B,CAAAC,QAAA,CAAE,EAAAM,YAAA,CAAAjF,CAAC,CAACI,QAAQ,UAAA6E,YAAA,iBAAVA,YAAA,CAAYtI,IAAI,GAAI,GAAG,CAAM,CAAC,cAC3E5B,KAAA,QAAK2J,SAAS,CAAC,sCAAsC,CAAAC,QAAA,EAAC,QACnD,CAAC3G,MAAM,CAACgC,CAAC,CAACnD,UAAU,CAAC,CAACqB,OAAO,CAAC,CAAC,CAAC,EAC9B,CAAC,EACH,CAAC,GAdD8B,CAAC,CAACwB,EAeJ,CAAC,EACP,CAAC,EACC,CAAC,EACH,CAAC,cAGN3G,IAAA,QAAK6J,SAAS,CAAC,4CAA4C,CAAAC,QAAA,cACzD5J,KAAA,UAAO2J,SAAS,CAAC,YAAY,CAAAC,QAAA,eAC3B9J,IAAA,UAAO6J,SAAS,CAAC,oCAAoC,CAAAC,QAAA,cACnD5J,KAAA,OAAA4J,QAAA,eACE9J,IAAA,OAAI6J,SAAS,CAAC,qBAAqB,CAAAC,QAAA,CAAC,GAAC,CAAI,CAAC,cAC1C9J,IAAA,OAAI6J,SAAS,CAAC,qBAAqB,CAAAC,QAAA,CAAC,OAAK,CAAI,CAAC,cAC9C9J,IAAA,OAAI6J,SAAS,CAAC,qBAAqB,CAAAC,QAAA,CAAC,MAAI,CAAI,CAAC,cAC7C9J,IAAA,OAAI6J,SAAS,CAAC,qBAAqB,CAAAC,QAAA,CAAC,UAAQ,CAAI,CAAC,cACjD9J,IAAA,OAAI6J,SAAS,CAAC,sBAAsB,CAAAC,QAAA,CAAC,OAAK,CAAI,CAAC,cAC/C9J,IAAA,OAAI6J,SAAS,CAAC,uBAAuB,CAAAC,QAAA,CAAC,QAAM,CAAI,CAAC,cACjD9J,IAAA,OAAI6J,SAAS,CAAC,uBAAuB,CAAAC,QAAA,CAAC,SAAO,CAAI,CAAC,EAChD,CAAC,CACA,CAAC,cAER5J,KAAA,UAAO2J,SAAS,CAAC,UAAU,CAAAC,QAAA,EACxBlJ,OAAO,eACNZ,IAAA,OAAA8J,QAAA,cACE9J,IAAA,OAAIuK,OAAO,CAAC,GAAG,CAACV,SAAS,CAAC,iBAAiB,CAAAC,QAAA,CAAC,qBAE5C,CAAI,CAAC,CACH,CACL,CAEA,CAAClJ,OAAO,EAAIF,QAAQ,CAAC+C,MAAM,GAAK,CAAC,eAChCzD,IAAA,OAAA8J,QAAA,cACE9J,IAAA,OAAIuK,OAAO,CAAC,GAAG,CAACV,SAAS,CAAC,iBAAiB,CAAAC,QAAA,CAAC,oBAE5C,CAAI,CAAC,CACH,CACL,CAEA,CAAClJ,OAAO,EAAIF,QAAQ,CAAC+C,MAAM,CAAG,CAAC,EAAIkB,iBAAiB,CAAClB,MAAM,GAAK,CAAC,eAChEzD,IAAA,OAAA8J,QAAA,cACE9J,IAAA,OAAIuK,OAAO,CAAC,GAAG,CAACV,SAAS,CAAC,iBAAiB,CAAAC,QAAA,CAAC,oBAE5C,CAAI,CAAC,CACH,CACL,CAEA,CAAClJ,OAAO,EACP+D,iBAAiB,CAACwF,GAAG,CAAC,CAAChF,CAAC,CAAEqF,GAAG,QAAAC,YAAA,oBAC3BvK,KAAA,OAAe2J,SAAS,CAAC,oBAAoB,CAAAC,QAAA,eAC3C9J,IAAA,OAAI6J,SAAS,CAAC,WAAW,CAAAC,QAAA,CAAEU,GAAG,CAAG,CAAC,CAAK,CAAC,cACxCxK,IAAA,OAAI6J,SAAS,CAAC,WAAW,CAAAC,QAAA,cACvB9J,IAAA,QACEqK,GAAG,CAAEvK,WAAW,CAACqF,CAAC,CAACyB,SAAS,CAAE,CAC9B0D,GAAG,CAAEnF,CAAC,CAACrD,IAAK,CACZ+H,SAAS,CAAC,uCAAuC,CAClD,CAAC,CACA,CAAC,cACL7J,IAAA,OAAI6J,SAAS,CAAC,WAAW,CAAAC,QAAA,CAAE3E,CAAC,CAACrD,IAAI,CAAK,CAAC,cACvC9B,IAAA,OAAI6J,SAAS,CAAC,WAAW,CAAAC,QAAA,CACtB,EAAAW,YAAA,CAAAtF,CAAC,CAACI,QAAQ,UAAAkF,YAAA,iBAAVA,YAAA,CAAY3I,IAAI,GAAI,GAAG,CACtB,CAAC,cACL5B,KAAA,OAAI2J,SAAS,CAAC,sBAAsB,CAAAC,QAAA,EAAC,QAClC,CAAC3G,MAAM,CAACgC,CAAC,CAACnD,UAAU,CAAC,CAACqB,OAAO,CAAC,CAAC,CAAC,EAC/B,CAAC,cACLrD,IAAA,OAAI6J,SAAS,CAAC,uBAAuB,CAAAC,QAAA,CAClC3E,CAAC,CAAClD,YAAY,GAAK,IAAI,EAAIkD,CAAC,CAAClD,YAAY,GAAK,CAAC,EAAIkD,CAAC,CAAClD,YAAY,GAAK,GAAG,cACxEjC,IAAA,SAAM6J,SAAS,CAAC,4DAA4D,CAAAC,QAAA,CAAC,WAE7E,CAAM,CAAC,cAEP9J,IAAA,SAAM6J,SAAS,CAAC,wDAAwD,CAAAC,QAAA,CAAC,cAEzE,CAAM,CACP,CACC,CAAC,cACL9J,IAAA,OAAI6J,SAAS,CAAC,uBAAuB,CAAAC,QAAA,cACnC5J,KAAA,QAAK2J,SAAS,CAAC,wCAAwC,CAAAC,QAAA,eACrD9J,IAAA,WACE0K,OAAO,CAAEA,CAAA,GAAMlE,eAAe,CAACrB,CAAC,CAAE,CAClC0E,SAAS,CAAC,8EAA8E,CACxFc,KAAK,CAAC,cAAc,CAAAb,QAAA,cAEpB9J,IAAA,CAACN,MAAM,GAAE,CAAC,CACJ,CAAC,cACTM,IAAA,WACE0K,OAAO,CAAEA,CAAA,GAAMnB,iBAAiB,CAACpE,CAAC,CAAE,CACpC0E,SAAS,CAAC,0EAA0E,CACpFc,KAAK,CAAC,gBAAgB,CAAAb,QAAA,cAEtB9J,IAAA,CAACL,QAAQ,GAAE,CAAC,CACN,CAAC,EACN,CAAC,CACJ,CAAC,GA5CEwF,CAAC,CAACwB,EA6CP,CAAC,EACN,CAAC,EACC,CAAC,EACH,CAAC,CACL,CAAC,CAEL7F,KAAK,eAAId,IAAA,QAAK6J,SAAS,CAAC,mBAAmB,CAAAC,QAAA,CAAEhJ,KAAK,CAAM,CAAC,EACvD,CAAC,EACH,CAAC,CAGLU,aAAa,eACZxB,IAAA,QAAK6J,SAAS,CAAC,4EAA4E,CAAAC,QAAA,cACzF5J,KAAA,QAAK2J,SAAS,CAAC,kFAAkF,CAAAC,QAAA,eAC/F5J,KAAA,QAAK2J,SAAS,CAAC,4EAA4E,CAAAC,QAAA,eACzF9J,IAAA,OAAI6J,SAAS,CAAC,mCAAmC,CAAAC,QAAA,CAAC,cAAY,CAAI,CAAC,cACnE9J,IAAA,WACE0K,OAAO,CAAE7D,oBAAqB,CAC9BgD,SAAS,CAAC,6CAA6C,CAAAC,QAAA,cAEvD9J,IAAA,CAACJ,GAAG,EAACiK,SAAS,CAAC,SAAS,CAAE,CAAC,CACrB,CAAC,EACN,CAAC,cAEN3J,KAAA,SAAM0K,QAAQ,CAAEnD,gBAAiB,CAACoC,SAAS,CAAC,KAAK,CAAAC,QAAA,eAC/C5J,KAAA,QAAK2J,SAAS,CAAC,wBAAwB,CAAAC,QAAA,eACrC5J,KAAA,QAAA4J,QAAA,eACE9J,IAAA,UAAO6J,SAAS,CAAC,8CAA8C,CAAAC,QAAA,CAAC,QAEhE,CAAO,CAAC,cACR9J,IAAA,UACE8B,IAAI,CAAC,MAAM,CACXmB,KAAK,CAAErB,QAAQ,CAACE,IAAK,CACrBoI,QAAQ,CAAEpD,gBAAiB,CAC3B+D,QAAQ,MACRhB,SAAS,CAAC,yGAAyG,CACnHI,WAAW,CAAC,oBAAoB,CACjC,CAAC,EACC,CAAC,cAEN/J,KAAA,QAAA4J,QAAA,eACE9J,IAAA,UAAO6J,SAAS,CAAC,8CAA8C,CAAAC,QAAA,CAAC,YAEhE,CAAO,CAAC,cACR5J,KAAA,WACE4B,IAAI,CAAC,aAAa,CAClBmB,KAAK,CAAErB,QAAQ,CAACG,WAAW,EAAI,EAAG,CAClCmI,QAAQ,CAAEpD,gBAAiB,CAC3B+D,QAAQ,MACRhB,SAAS,CAAC,yGAAyG,CAAAC,QAAA,eAEnH9J,IAAA,WAAQiD,KAAK,CAAC,EAAE,CAAA6G,QAAA,CAAC,iBAAe,CAAQ,CAAC,CACxCtH,UAAU,CAAC2H,GAAG,CAAEpF,GAAG,eAClB/E,IAAA,WAAqBiD,KAAK,CAAE8B,GAAG,CAAC4B,EAAG,CAAAmD,QAAA,CAChC/E,GAAG,CAACjD,IAAI,EADEiD,GAAG,CAAC4B,EAET,CACT,CAAC,EACI,CAAC,EACN,CAAC,cAGNzG,KAAA,QAAK2J,SAAS,CAAC,YAAY,CAAAC,QAAA,eACzB9J,IAAA,UAAO6J,SAAS,CAAC,8CAA8C,CAAAC,QAAA,CAAC,OAEhE,CAAO,CAAC,CACP,CAAC1H,WAAW,cACXlC,KAAA,QAAK2J,SAAS,CAAC,mEAAmE,CAAAC,QAAA,eAChF9J,IAAA,MAAG6J,SAAS,CAAC,oBAAoB,CAAAC,QAAA,CAAC,mBAAiB,CAAG,CAAC,cACvD9J,IAAA,UACEmH,IAAI,CAAC,MAAM,CACXrF,IAAI,CAAC,OAAO,CACZgJ,MAAM,CAAC,SAAS,CAChBZ,QAAQ,CAAEpD,gBAAiB,CAC3B+C,SAAS,CAAC,QAAQ,CAClBlD,EAAE,CAAC,mBAAmB,CACvB,CAAC,cACF3G,IAAA,UACE+K,OAAO,CAAC,mBAAmB,CAC3BlB,SAAS,CAAC,+CAA+C,CAAAC,QAAA,CAC1D,cAED,CAAO,CAAC,EACL,CAAC,cAEN5J,KAAA,QAAK2J,SAAS,CAAC,UAAU,CAAAC,QAAA,eACvB9J,IAAA,QACEqK,GAAG,CAAEjI,WAAY,CACjByH,SAAS,CAAC,4DAA4D,CACtES,GAAG,CAAC,SAAS,CACd,CAAC,cACFtK,IAAA,WACEmH,IAAI,CAAC,QAAQ,CACbuD,OAAO,CAAEA,CAAA,GAAM,CACb7I,WAAW,CAAAyF,aAAA,CAAAA,aAAA,IAAM1F,QAAQ,MAAEO,KAAK,CAAE,IAAI,EAAE,CAAC,CACzCE,cAAc,CACZX,cAAc,SAAdA,cAAc,WAAdA,cAAc,CAAEkF,SAAS,CACrB9G,WAAW,CAAC4B,cAAc,CAACkF,SAAS,CAAC,CACrC,IACN,CAAC,CACH,CAAE,CACFiD,SAAS,CAAC,gFAAgF,CAAAC,QAAA,cAE1F9J,IAAA,CAACL,QAAQ,GAAE,CAAC,CACN,CAAC,EACN,CACN,EACE,CAAC,cAENO,KAAA,QAAA4J,QAAA,eACE9J,IAAA,UAAO6J,SAAS,CAAC,8CAA8C,CAAAC,QAAA,CAAC,SAEhE,CAAO,CAAC,cACR5J,KAAA,QAAK2J,SAAS,CAAC,UAAU,CAAAC,QAAA,eACvB9J,IAAA,SAAM6J,SAAS,CAAC,qCAAqC,CAAAC,QAAA,CAAC,QAAC,CAAM,CAAC,cAC9D9J,IAAA,UACEmH,IAAI,CAAC,QAAQ,CACb6D,IAAI,CAAC,MAAM,CACXC,GAAG,CAAC,GAAG,CACPnJ,IAAI,CAAC,YAAY,CACjBmB,KAAK,CAAErB,QAAQ,CAACI,UAAW,CAC3BkI,QAAQ,CAAEpD,gBAAiB,CAC3BoE,MAAM,CAAEA,CAAA,GACNrJ,WAAW,CAAEsJ,IAAI,EAAA7D,aAAA,CAAAA,aAAA,IACZ6D,IAAI,MACPnJ,UAAU,CAAEgB,WAAW,CAACmI,IAAI,CAACnJ,UAAU,CAAC,EACxC,CACH,CACD6I,QAAQ,MACRhB,SAAS,CAAC,8GAA8G,CACxHI,WAAW,CAAC,MAAM,CACnB,CAAC,EACC,CAAC,EACH,CAAC,cAEN/J,KAAA,QAAA4J,QAAA,eACE9J,IAAA,UAAO6J,SAAS,CAAC,8CAA8C,CAAAC,QAAA,CAAC,cAEhE,CAAO,CAAC,cACR5J,KAAA,WACE4B,IAAI,CAAC,cAAc,CACnBmB,KAAK,CAAErB,QAAQ,CAACK,YAAa,CAC7BiI,QAAQ,CAAEpD,gBAAiB,CAC3B+C,SAAS,CAAC,yGAAyG,CAAAC,QAAA,eAEnH9J,IAAA,WAAQiD,KAAK,CAAC,GAAG,CAAA6G,QAAA,CAAC,WAAS,CAAQ,CAAC,cACpC9J,IAAA,WAAQiD,KAAK,CAAC,GAAG,CAAA6G,QAAA,CAAC,cAAY,CAAQ,CAAC,EACjC,CAAC,EACN,CAAC,cAEN5J,KAAA,QAAK2J,SAAS,CAAC,YAAY,CAAAC,QAAA,eACzB9J,IAAA,UAAO6J,SAAS,CAAC,8CAA8C,CAAAC,QAAA,CAAC,aAEhE,CAAO,CAAC,cACR9J,IAAA,aACE8B,IAAI,CAAC,aAAa,CAClBmB,KAAK,CAAErB,QAAQ,CAACM,WAAY,CAC5BgI,QAAQ,CAAEpD,gBAAiB,CAC3B+C,SAAS,CAAC,8GAA8G,CACxHI,WAAW,CAAC,2BAA2B,CAC9B,CAAC,EACT,CAAC,EACH,CAAC,cAEN/J,KAAA,QAAK2J,SAAS,CAAC,6BAA6B,CAAAC,QAAA,eAC1C9J,IAAA,WACEmH,IAAI,CAAC,QAAQ,CACbuD,OAAO,CAAE7D,oBAAqB,CAC9BgD,SAAS,CAAC,wGAAwG,CAAAC,QAAA,CACnH,QAED,CAAQ,CAAC,cACT9J,IAAA,WACEmH,IAAI,CAAC,QAAQ,CACbiE,QAAQ,CAAE9I,WAAY,CACtBuH,SAAS,CAAC,0IAA0I,CAAAC,QAAA,CAEnJxH,WAAW,CAAG,aAAa,CAAG,gBAAgB,CACzC,CAAC,EACN,CAAC,EACF,CAAC,EACJ,CAAC,CACH,CACN,CAGAI,eAAe,eACd1C,IAAA,QAAK6J,SAAS,CAAC,4EAA4E,CAAAC,QAAA,cACzF9J,IAAA,QAAK6J,SAAS,CAAC,oDAAoD,CAAAC,QAAA,cACjE5J,KAAA,QAAK2J,SAAS,CAAC,KAAK,CAAAC,QAAA,eAClB5J,KAAA,QAAK2J,SAAS,CAAC,wCAAwC,CAAAC,QAAA,eACrD9J,IAAA,OAAI6J,SAAS,CAAC,iCAAiC,CAAAC,QAAA,CAAC,gBAAc,CAAI,CAAC,cACnE9J,IAAA,WACE0K,OAAO,CAAElB,sBAAuB,CAChCK,SAAS,CAAC,6CAA6C,CAAAC,QAAA,cAEvD9J,IAAA,CAACJ,GAAG,EAACiK,SAAS,CAAC,SAAS,CAAE,CAAC,CACrB,CAAC,EACN,CAAC,cAEN3J,KAAA,QAAK2J,SAAS,CAAC,MAAM,CAAAC,QAAA,eACnB9J,IAAA,MAAG6J,SAAS,CAAC,oBAAoB,CAAAC,QAAA,CAAC,+CAElC,CAAG,CAAC,CACHlH,eAAe,eACd1C,KAAA,QAAK2J,SAAS,CAAC,2BAA2B,CAAAC,QAAA,eACxC9J,IAAA,MAAG6J,SAAS,CAAC,6BAA6B,CAAAC,QAAA,CAAElH,eAAe,CAACd,IAAI,CAAI,CAAC,cACrE9B,IAAA,MAAG6J,SAAS,CAAC,4BAA4B,CAAAC,QAAA,CAAC,+BAE1C,CAAG,CAAC,EACD,CACN,EACE,CAAC,cAEN5J,KAAA,QAAK2J,SAAS,CAAC,wBAAwB,CAAAC,QAAA,eACrC9J,IAAA,WACEmH,IAAI,CAAC,QAAQ,CACbuD,OAAO,CAAElB,sBAAuB,CAChC4B,QAAQ,CAAEtI,aAAc,CACxB+G,SAAS,CAAC,4HAA4H,CAAAC,QAAA,CACvI,QAED,CAAQ,CAAC,cACT9J,IAAA,WACEmH,IAAI,CAAC,QAAQ,CACbuD,OAAO,CAAEjB,mBAAoB,CAC7B2B,QAAQ,CAAEtI,aAAc,CACxB+G,SAAS,CAAC,sIAAsI,CAAAC,QAAA,CAE/IhH,aAAa,CAAG,aAAa,CAAG,gBAAgB,CAC3C,CAAC,EACN,CAAC,EACH,CAAC,CACH,CAAC,CACH,CACN,EACE,CAAC,CAEV","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}