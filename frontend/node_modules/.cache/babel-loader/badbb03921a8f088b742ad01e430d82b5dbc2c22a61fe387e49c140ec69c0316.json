{"ast":null,"code":"import _objectSpread from\"C:/Users/amy gee/Desktop/Sweet Bite Bakery System/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";// src/pages/Login.js\nimport React,{useState}from\"react\";import{useNavigate,Link}from\"react-router-dom\";import{useAuth}from\"../context/AuthContext\";import toast from\"react-hot-toast\";import logo from\"../assets/logo.png\";import cakesBg from\"../assets/cakes-bg.jpg\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Login(){const{login}=useAuth();const navigate=useNavigate();const[form,setForm]=useState({email:\"\",password:\"\"});const[loading,setLoading]=useState(false);const[error,setError]=useState(null);const handleChange=e=>{setForm(s=>_objectSpread(_objectSpread({},s),{},{[e.target.name]:e.target.value}));};const handleSubmit=async e=>{e.preventDefault();setError(null);setLoading(true);try{const loggedInUser=await login(form.email,form.password);console.log(\"‚úÖ Login successful. User:\",loggedInUser);toast.success(\"Welcome back, \".concat(loggedInUser.name,\"! \\uD83C\\uDF89\"));// Role-based redirect\nif(loggedInUser.role===\"admin\"){console.log(\"üîê Redirecting to admin dashboard...\");navigate(\"/admin/dashboard\",{replace:true});}else if(loggedInUser.role===\"customer\"){console.log(\"üõçÔ∏è Redirecting to customer home (products)...\");navigate(\"/\",{replace:true});}else{console.warn(\"‚ö†Ô∏è Unknown role:\",loggedInUser.role);navigate(\"/\",{replace:true});}}catch(err){var _err$response,_err$response$data,_err$response2,_err$response2$data;console.error(\"Login failed:\",err);let message=\"Invalid credentials. Please try again.\";if(err!==null&&err!==void 0&&(_err$response=err.response)!==null&&_err$response!==void 0&&(_err$response$data=_err$response.data)!==null&&_err$response$data!==void 0&&_err$response$data.message){message=err.response.data.message;}else if(err!==null&&err!==void 0&&(_err$response2=err.response)!==null&&_err$response2!==void 0&&(_err$response2$data=_err$response2.data)!==null&&_err$response2$data!==void 0&&_err$response2$data.errors){const errors=err.response.data.errors;if(errors&&typeof errors===\"object\"){const errorMessages=Object.values(errors).flat();message=errorMessages.join(\", \");}}setError(message);toast.error(\"Login failed ‚ùå\");}finally{setLoading(false);}};return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen flex items-center justify-center bg-cover bg-center\",style:{backgroundImage:\"linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.6)), url(\".concat(cakesBg,\")\"),backgroundSize:\"cover\",backgroundPosition:\"center\",backgroundRepeat:\"no-repeat\"},children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white shadow-lg rounded-2xl p-8 w-full max-w-md\",children:[/*#__PURE__*/_jsx(\"img\",{src:logo,alt:\"Sweet Bite Logo\",className:\"w-16 h-16 mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-center mb-6\",style:{color:\"#974D07\"},children:\"Sweet Bite\"}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"text-red-500 text-sm mb-3 text-center\",children:error}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm text-gray-600\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",value:form.email,onChange:handleChange,required:true,autoFocus:true,className:\"w-full border rounded-lg px-3 py-2 mt-1 focus:ring-2 outline-none\",style:{'--tw-ring-color':'#974D07'}})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm text-gray-600\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",value:form.password,onChange:handleChange,required:true,className:\"w-full border rounded-lg px-3 py-2 mt-1 focus:ring-2 outline-none\",style:{'--tw-ring-color':'#974D07'}})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading,className:\"w-full text-white py-2 rounded-lg transition\",style:{backgroundColor:\"#974D07\"},onMouseEnter:e=>e.target.style.opacity=\"0.9\",onMouseLeave:e=>e.target.style.opacity=\"1\",children:loading?\"Logging in...\":\"Login\"})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-500 text-center mt-4\",children:[\"Don\\u2019t have an account?\",\" \",/*#__PURE__*/_jsx(Link,{to:\"/register\",className:\"hover:underline\",style:{color:\"#974D07\"},children:\"Register\"})]})]})});}","map":{"version":3,"names":["React","useState","useNavigate","Link","useAuth","toast","logo","cakesBg","jsx","_jsx","jsxs","_jsxs","Login","login","navigate","form","setForm","email","password","loading","setLoading","error","setError","handleChange","e","s","_objectSpread","target","name","value","handleSubmit","preventDefault","loggedInUser","console","log","success","concat","role","replace","warn","err","_err$response","_err$response$data","_err$response2","_err$response2$data","message","response","data","errors","errorMessages","Object","values","flat","join","className","style","backgroundImage","backgroundSize","backgroundPosition","backgroundRepeat","children","src","alt","color","onSubmit","type","onChange","required","autoFocus","disabled","backgroundColor","onMouseEnter","opacity","onMouseLeave","to"],"sources":["C:/Users/amy gee/Desktop/Sweet Bite Bakery System/frontend/src/pages/Login.js"],"sourcesContent":["// src/pages/Login.js\nimport React, { useState } from \"react\";\nimport { useNavigate, Link } from \"react-router-dom\";\nimport { useAuth } from \"../context/AuthContext\";\nimport toast from \"react-hot-toast\";\nimport logo from \"../assets/logo.png\";\nimport cakesBg from \"../assets/cakes-bg.jpg\";\n\nexport default function Login() {\n  const { login } = useAuth();\n  const navigate = useNavigate();\n\n  const [form, setForm] = useState({ email: \"\", password: \"\" });\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n\n  const handleChange = (e) => {\n    setForm((s) => ({ ...s, [e.target.name]: e.target.value }));\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setError(null);\n    setLoading(true);\n\n    try {\n      const loggedInUser = await login(form.email, form.password);\n\n      console.log(\"‚úÖ Login successful. User:\", loggedInUser);\n      toast.success(`Welcome back, ${loggedInUser.name}! üéâ`);\n\n      // Role-based redirect\n      if (loggedInUser.role === \"admin\") {\n        console.log(\"üîê Redirecting to admin dashboard...\");\n        navigate(\"/admin/dashboard\", { replace: true });\n      } else if (loggedInUser.role === \"customer\") {\n        console.log(\"üõçÔ∏è Redirecting to customer home (products)...\");\n        navigate(\"/\", { replace: true });\n      } else {\n        console.warn(\"‚ö†Ô∏è Unknown role:\", loggedInUser.role);\n        navigate(\"/\", { replace: true });\n      }\n    } catch (err) {\n      console.error(\"Login failed:\", err);\n\n      let message = \"Invalid credentials. Please try again.\";\n\n      if (err?.response?.data?.message) {\n        message = err.response.data.message;\n      } else if (err?.response?.data?.errors) {\n        const errors = err.response.data.errors;\n        if (errors && typeof errors === \"object\") {\n          const errorMessages = Object.values(errors).flat();\n          message = errorMessages.join(\", \");\n        }\n      }\n\n      setError(message);\n      toast.error(\"Login failed ‚ùå\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div\n      className=\"min-h-screen flex items-center justify-center bg-cover bg-center\"\n      style={{\n        backgroundImage: `linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.6)), url(${cakesBg})`,\n        backgroundSize: \"cover\",\n        backgroundPosition: \"center\",\n        backgroundRepeat: \"no-repeat\",\n      }}\n    >\n      <div className=\"bg-white shadow-lg rounded-2xl p-8 w-full max-w-md\">\n        <img src={logo} alt=\"Sweet Bite Logo\" className=\"w-16 h-16 mx-auto mb-4\" />\n        <h1 className=\"text-3xl font-bold text-center mb-6\" style={{ color: \"#974D07\" }}>\n           Sweet Bite\n        </h1>\n\n        {error && (\n          <p className=\"text-red-500 text-sm mb-3 text-center\">\n            {error}\n          </p>\n        )}\n\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n          <div>\n            <label className=\"block text-sm text-gray-600\">Email</label>\n            <input\n              type=\"email\"\n              name=\"email\"\n              value={form.email}\n              onChange={handleChange}\n              required\n              autoFocus\n              className=\"w-full border rounded-lg px-3 py-2 mt-1 focus:ring-2 outline-none\"\n              style={{ '--tw-ring-color': '#974D07' }}\n            />\n          </div>\n\n          <div>\n            <label className=\"block text-sm text-gray-600\">Password</label>\n            <input\n              type=\"password\"\n              name=\"password\"\n              value={form.password}\n              onChange={handleChange}\n              required\n              className=\"w-full border rounded-lg px-3 py-2 mt-1 focus:ring-2 outline-none\"\n              style={{ '--tw-ring-color': '#974D07' }}\n            />\n          </div>\n\n          <button\n            type=\"submit\"\n            disabled={loading}\n            className=\"w-full text-white py-2 rounded-lg transition\"\n            style={{ backgroundColor: \"#974D07\" }}\n            onMouseEnter={(e) => e.target.style.opacity = \"0.9\"}\n            onMouseLeave={(e) => e.target.style.opacity = \"1\"}\n          >\n            {loading ? \"Logging in...\" : \"Login\"}\n          </button>\n        </form>\n\n        <p className=\"text-sm text-gray-500 text-center mt-4\">\n          Don‚Äôt have an account?{\" \"}\n          <Link to=\"/register\" className=\"hover:underline\" style={{ color: \"#974D07\" }}>\n            Register\n          </Link>\n        </p>\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}