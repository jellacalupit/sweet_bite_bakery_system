{"ast":null,"code":"// src/pages/Orders.js\nimport React,{useEffect,useState}from\"react\";import api from\"../api/api\";import{useAuth}from\"../context/AuthContext\";import{getImageUrl}from\"../utils/imageUrl\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Orders(){const[orders,setOrders]=useState([]);const[loading,setLoading]=useState(true);const{user}=useAuth();useEffect(()=>{if(!(user!==null&&user!==void 0&&user.id))return;// wait until user is loaded\napi.get(\"/orders/user/\".concat(user.id)).then(res=>{console.log(\"‚úÖ Orders API:\",res.data);setOrders(res.data.data||res.data);}).catch(err=>{console.error(\"‚ùå Error fetching orders:\",err);}).finally(()=>setLoading(false));},[user]);if(loading){return/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center justify-center h-screen\",style:{background:\"linear-gradient(to bottom, #fff8f0, #f0e6dd)\"},children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-5xl animate-bounce\",children:\"\\uD83E\\uDDC1\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-3 font-semibold animate-pulse\",style:{color:\"#974D07\"},children:\"Loading your orders...\"})]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen py-10 px-6 flex flex-col items-center pt-20\",style:{backgroundColor:\"#fff8f0\"},children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-center mb-8\",style:{color:\"#974D07\"},children:\"\\uD83E\\uDDC1 Your Orders\"}),orders.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 text-center\",children:\"No orders yet. Go grab a treat!\"}):/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full max-w-6xl\",children:orders.map(order=>{var _order$items;return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white shadow-lg rounded-2xl p-6 border hover:shadow-lg transition\",style:{borderColor:\"#e8ddd2\"},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-2\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"font-semibold text-lg text-gray-700\",children:[\"Order #\",order.id]}),/*#__PURE__*/_jsx(\"span\",{className:\"px-3 py-1 rounded-full text-sm \".concat(order.status===\"completed\"?\"bg-green-100 text-green-600\":order.status===\"processing\"?\"bg-yellow-100 text-yellow-600\":order.status===\"cancelled\"?\"bg-red-100 text-red-600\":\"bg-gray-100 text-gray-600\"),children:order.status})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-500 mb-1\",children:[\"Payment:\",\" \",/*#__PURE__*/_jsx(\"span\",{className:\"font-medium \".concat(order.payment_status===\"paid\"?\"text-green-600\":\"text-red-500\"),children:order.payment_status})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-500 mb-1\",children:[\"Method:\",\" \",/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:order.payment_method})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-500 mb-4\",children:[\"Fulfillment:\",\" \",/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:order.fulfillment})]}),((_order$items=order.items)===null||_order$items===void 0?void 0:_order$items.length)>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"border-t pt-3\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold text-gray-700 mb-2\",children:\"Items:\"}),order.items.map(item=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3 mb-3\",children:[item.product_image&&/*#__PURE__*/_jsx(\"img\",{src:getImageUrl(item.product_image),alt:item.product_name,className:\"w-10 h-10 object-cover rounded\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm font-medium\",children:[item.product_name,\" \\xD7 \",item.quantity]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-gray-500\",children:[\"\\u20B1\",Number(item.total_price).toFixed(2)]})]})]},item.id))]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3 flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"strong\",{className:\"text-gray-700\",children:\"Total:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-semibold text-lg\",style:{color:\"#974D07\"},children:[\"\\u20B1\",Number(order.total).toFixed(2)]})]}),order.pickup_time&&/*#__PURE__*/_jsxs(\"p\",{className:\"mt-2 text-xs text-gray-400\",children:[\"Pickup Time: \",new Date(order.pickup_time).toLocaleString()]})]},order.id);})})]});}","map":{"version":3,"names":["React","useEffect","useState","api","useAuth","getImageUrl","jsx","_jsx","jsxs","_jsxs","Orders","orders","setOrders","loading","setLoading","user","id","get","concat","then","res","console","log","data","catch","err","error","finally","className","style","background","children","color","backgroundColor","length","map","order","_order$items","borderColor","status","payment_status","payment_method","fulfillment","items","item","product_image","src","alt","product_name","quantity","Number","total_price","toFixed","total","pickup_time","Date","toLocaleString"],"sources":["C:/Users/amy gee/Desktop/Sweet Bite Bakery System/frontend/src/pages/Orders.js"],"sourcesContent":["// src/pages/Orders.js\nimport React, { useEffect, useState } from \"react\";\nimport api from \"../api/api\";\nimport { useAuth } from \"../context/AuthContext\";\nimport { getImageUrl } from \"../utils/imageUrl\";\n\nexport default function Orders() {\n  const [orders, setOrders] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const { user } = useAuth();\n\n  useEffect(() => {\n    if (!user?.id) return; // wait until user is loaded\n\n    api\n      .get(`/orders/user/${user.id}`)\n      .then((res) => {\n        console.log(\"‚úÖ Orders API:\", res.data);\n        setOrders(res.data.data || res.data);\n      })\n      .catch((err) => {\n        console.error(\"‚ùå Error fetching orders:\", err);\n      })\n      .finally(() => setLoading(false));\n  }, [user]);\n\n  if (loading) {\n    return (\n      <div className=\"flex flex-col items-center justify-center h-screen\" style={{ background: \"linear-gradient(to bottom, #fff8f0, #f0e6dd)\" }}>\n        <div className=\"text-5xl animate-bounce\">üßÅ</div>\n        <p className=\"mt-3 font-semibold animate-pulse\" style={{ color: \"#974D07\" }}>\n          Loading your orders...\n        </p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen py-10 px-6 flex flex-col items-center pt-20\" style={{ backgroundColor: \"#fff8f0\" }}>\n      <h1 className=\"text-3xl font-bold text-center mb-8\" style={{ color: \"#974D07\" }}>\n        üßÅ Your Orders\n      </h1>\n\n      {orders.length === 0 ? (\n        <p className=\"text-gray-500 text-center\">\n          No orders yet. Go grab a treat!\n        </p>\n      ) : (\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full max-w-6xl\">\n          {orders.map((order) => (\n            <div\n              key={order.id}\n              className=\"bg-white shadow-lg rounded-2xl p-6 border hover:shadow-lg transition\"\n              style={{ borderColor: \"#e8ddd2\" }}\n            >\n              <div className=\"flex justify-between items-center mb-2\">\n                <h2 className=\"font-semibold text-lg text-gray-700\">\n                  Order #{order.id}\n                </h2>\n                <span\n                  className={`px-3 py-1 rounded-full text-sm ${\n                    order.status === \"completed\"\n                      ? \"bg-green-100 text-green-600\"\n                      : order.status === \"processing\"\n                      ? \"bg-yellow-100 text-yellow-600\"\n                      : order.status === \"cancelled\"\n                      ? \"bg-red-100 text-red-600\"\n                      : \"bg-gray-100 text-gray-600\"\n                  }`}\n                >\n                  {order.status}\n                </span>\n              </div>\n\n              <p className=\"text-sm text-gray-500 mb-1\">\n                Payment:{\" \"}\n                <span\n                  className={`font-medium ${\n                    order.payment_status === \"paid\"\n                      ? \"text-green-600\"\n                      : \"text-red-500\"\n                  }`}\n                >\n                  {order.payment_status}\n                </span>\n              </p>\n\n              <p className=\"text-sm text-gray-500 mb-1\">\n                Method:{\" \"}\n                <span className=\"font-medium\">{order.payment_method}</span>\n              </p>\n\n              <p className=\"text-sm text-gray-500 mb-4\">\n                Fulfillment:{\" \"}\n                <span className=\"font-medium\">{order.fulfillment}</span>\n              </p>\n\n              {order.items?.length > 0 && (\n                <div className=\"border-t pt-3\">\n                  <h3 className=\"font-semibold text-gray-700 mb-2\">Items:</h3>\n                  {order.items.map((item) => (\n                    <div\n                      key={item.id}\n                      className=\"flex items-center gap-3 mb-3\"\n                    >\n                      {item.product_image && (\n                        <img\n                          src={getImageUrl(item.product_image)}\n                          alt={item.product_name}\n                          className=\"w-10 h-10 object-cover rounded\"\n                        />\n                      )}\n                      <div className=\"flex-1\">\n                        <div className=\"text-sm font-medium\">\n                          {item.product_name} √ó {item.quantity}\n                        </div>\n                        <div className=\"text-xs text-gray-500\">\n                          ‚Ç±{Number(item.total_price).toFixed(2)}\n                        </div>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              )}\n\n              <div className=\"mt-3 flex justify-between items-center\">\n                <strong className=\"text-gray-700\">Total:</strong>\n                <span className=\"font-semibold text-lg\" style={{ color: \"#974D07\" }}>\n                  ‚Ç±{Number(order.total).toFixed(2)}\n                </span>\n              </div>\n\n              {order.pickup_time && (\n                <p className=\"mt-2 text-xs text-gray-400\">\n                  Pickup Time: {new Date(order.pickup_time).toLocaleString()}\n                </p>\n              )}\n            </div>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}