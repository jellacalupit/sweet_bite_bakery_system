{"ast":null,"code":"import _objectSpread from\"C:/Users/amy gee/Desktop/Sweet Bite Bakery System/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";// src/pages/Register.js\nimport React,{useState}from\"react\";import api from\"../api/api\";import{useNavigate,Link}from\"react-router-dom\";import{useAuth}from\"../context/AuthContext\";import toast from\"react-hot-toast\";import logo from\"../assets/logo.png\";import cakesBg from\"../assets/cakes-bg.jpg\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Register(){const[form,setForm]=useState({name:\"\",phone:\"\",address:\"\",email:\"\",password:\"\",password_confirmation:\"\"});const[loading,setLoading]=useState(false);const[error,setError]=useState(null);const navigate=useNavigate();const{login}=useAuth();const handleChange=e=>{setForm(s=>_objectSpread(_objectSpread({},s),{},{[e.target.name]:e.target.value}));};const handleSubmit=async e=>{e.preventDefault();setLoading(true);setError(null);try{// Call register endpoint\nawait api.post(\"/register\",form);// After registration, auto-login the user using email/password\n// (Assuming your login endpoint accepts email + password)\nawait login(form.email,form.password);toast.success(\"Account created ‚Äî welcome! üéâ\");navigate(\"/\");// go to Home\n}catch(err){var _err$response,_err$response$data,_err$response2,_err$response2$data;console.error(\"Registration failed:\",err);// Handle Laravel validation errors or message\nconst backendMsg=(err===null||err===void 0?void 0:(_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.message)||(err===null||err===void 0?void 0:(_err$response2=err.response)===null||_err$response2===void 0?void 0:(_err$response2$data=_err$response2.data)===null||_err$response2$data===void 0?void 0:_err$response2$data.errors)&&JSON.stringify(err.response.data.errors)||(err===null||err===void 0?void 0:err.message)||\"Registration failed\";setError(backendMsg);toast.error(\"Registration failed ‚ùå\");}finally{setLoading(false);}};return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen flex items-center justify-center bg-cover bg-center\",style:{backgroundImage:\"linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.6)), url(\".concat(cakesBg,\")\"),backgroundSize:\"cover\",backgroundPosition:\"center\",backgroundRepeat:\"no-repeat\"},children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white shadow-lg rounded-2xl p-8 w-full max-w-md\",children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"text-3xl font-bold text-center text-pink-600 mb-6\",children:[/*#__PURE__*/_jsx(\"img\",{src:logo,alt:\"Sweet Bite Logo\",className:\"w-16 h-16 mx-auto mb-4\"}),\" Create an Account\"]}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"text-red-500 text-sm mb-3 text-center\",children:error}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm text-gray-600\",children:\"Full Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"name\",value:form.name,onChange:handleChange,required:true,className:\"w-full border rounded-lg px-3 py-2 mt-1 focus:ring-2 focus:ring-pink-400 outline-none\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm text-gray-600\",children:\"Phone Number\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"phone\",value:form.phone,onChange:handleChange,required:true,className:\"w-full border rounded-lg px-3 py-2 mt-1 focus:ring-2 focus:ring-pink-400 outline-none\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm text-gray-600\",children:\"Address\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"address\",value:form.address,onChange:handleChange,required:true,className:\"w-full border rounded-lg px-3 py-2 mt-1 focus:ring-2 focus:ring-pink-400 outline-none\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm text-gray-600\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",value:form.email,onChange:handleChange,required:true,className:\"w-full border rounded-lg px-3 py-2 mt-1 focus:ring-2 focus:ring-pink-400 outline-none\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm text-gray-600\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",value:form.password,onChange:handleChange,required:true,className:\"w-full border rounded-lg px-3 py-2 mt-1 focus:ring-2 focus:ring-pink-400 outline-none\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm text-gray-600\",children:\"Confirm Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password_confirmation\",value:form.password_confirmation,onChange:handleChange,required:true,className:\"w-full border rounded-lg px-3 py-2 mt-1 focus:ring-2 focus:ring-pink-400 outline-none\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading,className:\"w-full bg-pink-500 text-white py-2 rounded-lg hover:bg-pink-600 transition\",children:loading?\"Registering...\":\"Create Account\"})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-500 text-center mt-4\",children:[\"Already have an account?\",\" \",/*#__PURE__*/_jsx(Link,{to:\"/login\",className:\"text-pink-500 hover:underline\",children:\"Login\"})]})]})});}","map":{"version":3,"names":["React","useState","api","useNavigate","Link","useAuth","toast","logo","cakesBg","jsx","_jsx","jsxs","_jsxs","Register","form","setForm","name","phone","address","email","password","password_confirmation","loading","setLoading","error","setError","navigate","login","handleChange","e","s","_objectSpread","target","value","handleSubmit","preventDefault","post","success","err","_err$response","_err$response$data","_err$response2","_err$response2$data","console","backendMsg","response","data","message","errors","JSON","stringify","className","style","backgroundImage","concat","backgroundSize","backgroundPosition","backgroundRepeat","children","src","alt","onSubmit","type","onChange","required","disabled","to"],"sources":["C:/Users/amy gee/Desktop/Sweet Bite Bakery System/frontend/src/pages/Register.js"],"sourcesContent":["// src/pages/Register.js\nimport React, { useState } from \"react\";\nimport api from \"../api/api\";\nimport { useNavigate, Link } from \"react-router-dom\";\nimport { useAuth } from \"../context/AuthContext\";\nimport toast from \"react-hot-toast\";\nimport logo from \"../assets/logo.png\";\nimport cakesBg from \"../assets/cakes-bg.jpg\";\n\nexport default function Register() {\n  const [form, setForm] = useState({\n    name: \"\",\n    phone: \"\",\n    address: \"\",\n    email: \"\",\n    password: \"\",\n    password_confirmation: \"\",\n  });\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n\n  const navigate = useNavigate();\n  const { login } = useAuth();\n\n  const handleChange = (e) => {\n    setForm((s) => ({ ...s, [e.target.name]: e.target.value }));\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n    setError(null);\n\n    try {\n      // Call register endpoint\n      await api.post(\"/register\", form);\n\n      // After registration, auto-login the user using email/password\n      // (Assuming your login endpoint accepts email + password)\n      await login(form.email, form.password);\n\n      toast.success(\"Account created ‚Äî welcome! üéâ\");\n      navigate(\"/\"); // go to Home\n    } catch (err) {\n      console.error(\"Registration failed:\", err);\n\n      // Handle Laravel validation errors or message\n      const backendMsg =\n        err?.response?.data?.message ||\n        (err?.response?.data?.errors && JSON.stringify(err.response.data.errors)) ||\n        err?.message ||\n        \"Registration failed\";\n\n      setError(backendMsg);\n      toast.error(\"Registration failed ‚ùå\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center bg-cover bg-center\"\n      style={{\n        backgroundImage: `linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.6)), url(${cakesBg})`,\n        backgroundSize: \"cover\",\n        backgroundPosition: \"center\",\n        backgroundRepeat: \"no-repeat\",\n      }}>\n      <div className=\"bg-white shadow-lg rounded-2xl p-8 w-full max-w-md\">\n        <h1 className=\"text-3xl font-bold text-center text-pink-600 mb-6\">\n          <img src={logo} alt=\"Sweet Bite Logo\" className=\"w-16 h-16 mx-auto mb-4\" /> Create an Account\n        </h1>\n\n        {error && <p className=\"text-red-500 text-sm mb-3 text-center\">{error}</p>}\n\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n          <div>\n            <label className=\"block text-sm text-gray-600\">Full Name</label>\n            <input\n              type=\"text\"\n              name=\"name\"\n              value={form.name}\n              onChange={handleChange}\n              required\n              className=\"w-full border rounded-lg px-3 py-2 mt-1 focus:ring-2 focus:ring-pink-400 outline-none\"\n            />\n          </div>\n\n          <div>\n            <label className=\"block text-sm text-gray-600\">Phone Number</label>\n            <input\n              type=\"text\"\n              name=\"phone\"\n              value={form.phone}\n              onChange={handleChange}\n              required\n              className=\"w-full border rounded-lg px-3 py-2 mt-1 focus:ring-2 focus:ring-pink-400 outline-none\"\n            />\n          </div>\n\n          <div>\n            <label className=\"block text-sm text-gray-600\">Address</label>\n            <input\n              type=\"text\"\n              name=\"address\"\n              value={form.address}\n              onChange={handleChange}\n              required\n              className=\"w-full border rounded-lg px-3 py-2 mt-1 focus:ring-2 focus:ring-pink-400 outline-none\"\n            />\n          </div>\n\n          <div>\n            <label className=\"block text-sm text-gray-600\">Email</label>\n            <input\n              type=\"email\"\n              name=\"email\"\n              value={form.email}\n              onChange={handleChange}\n              required\n              className=\"w-full border rounded-lg px-3 py-2 mt-1 focus:ring-2 focus:ring-pink-400 outline-none\"\n            />\n          </div>\n\n          <div>\n            <label className=\"block text-sm text-gray-600\">Password</label>\n            <input\n              type=\"password\"\n              name=\"password\"\n              value={form.password}\n              onChange={handleChange}\n              required\n              className=\"w-full border rounded-lg px-3 py-2 mt-1 focus:ring-2 focus:ring-pink-400 outline-none\"\n            />\n          </div>\n\n          <div>\n            <label className=\"block text-sm text-gray-600\">Confirm Password</label>\n            <input\n              type=\"password\"\n              name=\"password_confirmation\"\n              value={form.password_confirmation}\n              onChange={handleChange}\n              required\n              className=\"w-full border rounded-lg px-3 py-2 mt-1 focus:ring-2 focus:ring-pink-400 outline-none\"\n            />\n          </div>\n\n          <button\n            type=\"submit\"\n            disabled={loading}\n            className=\"w-full bg-pink-500 text-white py-2 rounded-lg hover:bg-pink-600 transition\"\n          >\n            {loading ? \"Registering...\" : \"Create Account\"}\n          </button>\n        </form>\n\n        <p className=\"text-sm text-gray-500 text-center mt-4\">\n          Already have an account?{\" \"}\n          <Link to=\"/login\" className=\"text-pink-500 hover:underline\">\n            Login\n          </Link>\n        </p>\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}